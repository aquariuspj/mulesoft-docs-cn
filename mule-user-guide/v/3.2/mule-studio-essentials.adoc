=  Mule Studio Essentials



== 工作室概览

Studio是一个集成的双向环境，用于开发，调试和部署Mule ESB（企业服务总线）应用程序。为了简化应用程序的创建，Studio为开发人员提供了多种工具可供选择 - 可视化，拖放式编辑器和XML代码编辑器。两位编辑协同工作，从而使"round-trip"编辑成为现实。

视觉环境使开发人员能够在构图画布上安排构建块以创建Mule流，这些构成Mule应用程序的基础。一个流可以包含多个输入，分支，队列，对外部资源的调用以及多个输出等功能。只需在画布上拖放构建块即可创建一系列便于处理Mule消息的事件。每次构建块相对于其他构建块被插入或删除时，Studio都会自动更新包含所有流配置信息的基础XML文件。

可视化环境还提供对话框，通常接受简单的英文条目，而不是格式化的XML，因此开发人员在配置每个构建块时不必担心XML语法。

然而，已经习惯了XML的开发人员可能更喜欢使用Studio的XML编辑器来通过将XML语句直接写入XML配置文件来设置配置细节。 Studio通过实时提供语法指导（自动完成建议），并提供下拉菜单，以列出您尝试编码的XML属性的可用选项，从而使XML编码变得更加简单。

开发人员可以在两种编辑模式之间轻松切换;无论使用哪种编辑器，Studio都会自动记录构建块关系和设置细节。

[%header%autowidth.spread]
|===
| image:check.png[查]  |本文档以不同方式指代附带的**Mule ESB (Community Edition)**，*Mule Studio*，*Mule*或{{ 4}}。所有这些条款都适合这种多面产品。

|===

== 骡术语

*Mule* ESB（企业服务总线）是一种服务器环境，可促进应用程序与整个企业内以及整个Web上的资源（如数据库，JMS队列和文件服务器等）的集成。具体而言，Mule提供的基础架构允许开发人员组装，配置，调试和部署以*Messages.*为单位接收，处理和分发数据的应用程序

*Messages*是由Mule应用程序处理的功能数据单元或数据包。例如，提交给Mule购买履行应用程序的每个客户订单都有资格作为消息。每条消息都包含一个消息头 - 其中包含元数据（例如消息的发送者）以及一个数据有效载荷，其中可能包含XML，JSON，文件，流，映射，Java对象或任何其他类型的数据。

*Building Blocks*是与Mule捆绑在一起的预打包业务逻辑单元。值得注意的是两大类积木：

*  *Message Processors*过滤，修改，路由或验证Mule应用程序中的消息。

*  *Message Sources,*也被称为*Inbound Endpoints*，接受消息并触发Mule应用程序中的消息处理。从技术上讲，接收消息而不是处理消息的消息源不具备消息处理器的资格。

image:Building+Block+Schematic.png[建筑+模块+原理图]

*Components*分为两个子类别。第一组提供预先打包的功能，例如日志记录和回显。第二组成员将自定义编码功能集成到Mule应用程序中。自定义代码可以开发为Java类，Spring bean或者Ruby，JavaScript，Groovy或Python脚本。

Mule *Flow*位于每个Mule应用程序的核心，负责编排该应用程序对消息的处理。通常，*Message Source*接收或检索一条消息，这会触发主消息处理流程。流程中的每个构件块（即消息处理器）以某种方式评估或处理消息。简单的应用程序由消息处理器的单个序列（即流程）组成，但复杂的应用程序也可以分成并行分支流程。

[%header%autowidth.spread]
|===
| image:check.png[查]  |本文档似乎几乎可互换地使用术语*flow*，*application*和*project*。事实上，很多简单的应用程序只实现一个主要流程，所以在这些情况下，这些术语几乎是同义词。但是，复杂的应用程序可以使用许多同步和异步的子流程，这些子流程分支主流程。最后，流程是编排消息处理的构建模块序列，而应用程序是在服务器上执行某些功能的计算机代码。另一方面，项目包括所有文件，设置，数据集和其他资源（如图标），这些资源在消息流画布上进行组合以创建应用程序或展示流。

|===

=== 捆绑构建块的类型

[%header%autowidth.spread]
|===
|   |构建块 |说明
| 1  |端点 |用于发送和接收数据的通道。端点可以是入站或出站。入站端点（限定为消息源），而不是消息处理器，在一个或多个通道（如HTTP或FTP等）上侦听传入消息。出站端点将数据从流中传输出去;他们可以在消息处理器序列中占据最终位置，或者在某些情况下占据中间位置。
| 2  |范围 |用于对构建块，消息或数据有效负载部分进行分组的机制，以便它们被流中的其他构件块视为单个单元。
| 3  |组件 | Mule组件分为两类。预先打包的组件启动从记录到回应的任务。另一个子组中的组件允许开发者打包业务逻辑（自定义编写为Java对象，Spring bean或Python脚本等）。
| 4  |变换器 |在将消息发送到流中的下一个构建块之前，更改消息的内容（通常是数据负载）。例如，以XML接收的消息可能会转换为列和值的映射，以便数据库可以使用它。
| 5  |过滤器 |确定符合特定条件的消息在流中路由的位置。例如，过滤器可能会丢弃所有已处理的重复传入消息。
| 6  |流量控制 |管理构件之间的数据传输。这可以包括分支或数据聚合。
| 7  |云连接器 |将Mule应用程序连接到云或基于Web的API服务（如Salesforce或Magento）的特殊类型构建块。
|===

== 创建Mule应用程序

设计完项目后，即使是最复杂的应用程序的创建也包括两个主要步骤：

. 从Studio Palette中选择预先打包的构建基块，然后在消息流画布上按逻辑顺序排列它们。
. 通过*Properties*面板配置每个构建块。这些面板中的很多都具有列出所有有效选项的下拉菜单，因此您甚至不必输入您的选择。将鼠标悬停在属性字段上时，弹出帮助提示框。

Mule的Studio界面允许您创建和部署您的Mule应用程序，而无需编写一行XML代码。所有通过画布上的构建块排序和对话面板表示的信息都会在应用程序的XML配置文件中自动捕获。

您可以直接以XML格式编辑配置文件，但您也可以返回Studio的视觉画布和纯英文对话面板来微调您的设置。

== 关于主要流程

至少，所有Mule应用程序都包含主流程。主流程中的构建块可能产生多个异步流程，分支到并行处理流程并包含同步子流程，但在任何情况下，主流程仍然是应用程序的主干。

所有主流都以消息源（即入站端点）开始。这个密钥构建块在一个或多个通道（例如HTTP或FTP）上侦听传入消息。每个传入的消息都会触发一个流实例，该实例将消息沿流中的构建块序列传递。

消息源确定两个*Exchange Patterns*（单向或请求响应）中的哪一个将定义流。第一种类型接受消息，但不回复消息的发送者。相比之下，请求响应流程需要Mule应用程序向发件人发送回复。

=== 关于单向流

以下端点默认为单向交换模式：

[%header%autowidth.spread]
|===
| image:Ajax.png[阿贾克斯] +

  *Ajax*
image:FTP.png[FTP] +

  *File*
image:Generic.png[通用] +

  *IMAP*
image:JDBC.png[JDBC] +

  *JMS*
image:POP3.png[POP3] +

  *Quartz*
image:SFTP.png[SFTP] +

  *SSL*
image:VM.png[VM] +
|===

通常，消息以顺序方式直接通过单向流程的构建块，如下图所示：

image:Simple+One+Way+Flow.png[简单+一个+方法+流量]

例如，假设我们的Mule应用程序接受节日目录请求，这些请求在数月后才会被确认或实现，此时邮寄印刷材料。消息源是JMS入站端点，它接收来自外部JMS队列的目录请求。接下来，表达式过滤器检查数据有效载荷，丢弃丢失或无效数据的消息。确定包含完整有效数据的消息进入JMSMessage-to-Object转换器，该转换器将数据负载转换为Java对象。接下来，流程中心的定制代码组件按照目录标题和邮政编码对客户请求进行分类，然后将专有批次ID添加到数据有效负载中，从而有助于在今年晚些时候进行高效的群发邮件。另一个变换器（Object-to-XML）将有效载荷转换为XML，以便将其存储在专有数据库中。最后，传出的JDBC端点使用JDBC协议将每个已处理的消息分发到外部数据库。

=== 关于请求 - 响应流程

某些端点（如HTTP）默认为请求 - 响应交换模式。能够请求 - 响应交换模式的端点的完整列表包括以下内容：

[%header%autowidth.spread]
|===
| image:HTTP.png[HTTP] +

  *HTTP*
image:Jetty.png[码头] +

  *RMI*
image:Servlet.png[Servlet的] +

  *TCP*
image:UDP.png[UDP] +
|===

请注意，如果您覆盖默认的请求 - 响应设置，则其中一些端点也支持单向交换模式。

每当消息源要求每个消息的发送者接收到答复时（即消息源指定请求 - 响应交换模式），流程将实现请求 - 响应"loop"，如以下示意图所示：

image:Request+Response+Flow.png[请求+响应+流量]

例如，假设我们开发了一个新的Mule应用程序，该应用程序使用请求 - 响应模式接收，处理和完成假日目录请求。消息源 - 使用FORM方法及其默认请求 - 响应设置的HTTP入站端点 - 接收包含客户信息的消息，包括他们想要的特定目录的名称。表达式过滤器检查这些传入的消息，丢弃那些数据不完整或无效的消息。对象到XML转换器将数据有效载荷从Java对象转换为XML。此应用程序中心的定制代码组件确定客户需要的目录，然后以PDF格式检索该出版物。最后，用作流出端点的SMTP端点将目录分派到请求目录的客户提供的电子邮件地址。

==== 请求 - 响应消息源的可视表示

当消息流画布上的入站端点设置为请求 - 响应交换模式时，会出现一个特殊的"double icon"，如下图所示：

image:InboundReqRespExample.png[InboundReqRespExample]

双箭头的左上角出现双向箭头，表示请求 - 响应交换模式。

== 从哪里开始

有关使用Studio各种界面功能的技巧和诀窍，请参阅：

*  link:/mule-user-guide/v/3.2/the-studio-interface[Studio界面]
*  link:/mule-user-guide/v/3.2/the-studio-palette[工作室调色板]
*  link:/mule-user-guide/v/3.2/studio-building-block-properties[Studio Building Block属性]
*  link:/mule-user-guide/v/3.2/the-studio-xml-editor[Studio XML编辑器]

如果您对Mule或Studio界面有任何疑问，请查看我们的 link:/mule-user-guide/v/3.2/studio-faq[FAQ页面]。

继续踢！
