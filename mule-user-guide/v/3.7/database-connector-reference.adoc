= 数据库连接器参考
:keywords: database connector, jdbc, anypoint studio, esb, data base, connectors, mysql, stored procedure, sql, derby, oracle

此页面总结了 link:/mule-user-guide/v/3.7/database-connector[数据库连接器]的配置参数。

*Note*：在Mule 3.7及更新的版本中，所选字段支持MEL表达式。有关更多信息，请参阅 link:/mule-user-guide/v/3.7/database-connector[数据库连接器]指南。

== 选择

选择数据库中的数据。

<select...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
|流 |布尔值 |否 | false  |指示结果集是否必须作为迭代器或映射列表返回。
| fetchSize  | integer  | no  |   |指示从结果集读取行时从数据库中提取多少行。当流媒体为真时，此属性是必需的;在这种情况下，使用默认值（10）。
| maxRows  |整数 |否 |   |设置此消息处理器为任何ResultSet对象生成的最大行数限制给定数量。如果超出限制，超出的行将被无声地丢弃。
|===

<select...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 0..1  |
|模板查询-REF  | 0..1  |
|在-PARAM  | 0 .. *  |
|参数化查询 | 0..1  |
|在-PARAM  | 0..1  |
| {abstractQueryResultSetHandler {1}} 0..1  |
|===

== 更新

更新数据库中的数据。

<update...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
| bulkMode  |布尔值 |否 | false  |指示是否请求批量更新。如果为true，则需要负载为集合中的每个项目并执行批量更新。
|===

<update...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 0..1  |
|模板查询-REF  | 0..1  |
|在-PARAM  | 0 .. *  |
|参数化查询 | 0..1  |
|在-PARAM  | 0..1  |
|===

== 删除

从数据库中删除数据。

<delete...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
| bulkMode  |布尔值 |否 | false  |指示是否请求批量更新。如果为true，则需要负载为集合中的每个项目并执行批量更新。
|===

<delete...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 0..1  |
|模板查询-REF  | 0..1  |
|在-PARAM  | 0 .. *  |
|参数化查询 | 0..1  |
|在-PARAM  | 0..1  |
|===

== 插入

将数据插入数据库。

<insert...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
| bulkMode  |布尔值 |否 | false  |指示是否请求批量更新。如果为true，则需要负载为集合中的每个项目并执行批量更新。
| autoGeneratedKeys  |布尔值 |否 | false  |指示何时使自动生成的密钥可供检索。
| autoGeneratedKeysColumnIndexes  |字符串 |否 |   |以逗号分隔的列索引列表，指示自动生成的哪些键可供检索。
| autoGeneratedKeysColumnNames  |字符串 |否 |   |逗号分隔的列名称列表，指示应将哪些自动生成的密钥用于检索。
|===

<insert...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 0..1  |
|模板查询-REF  | 0..1  |
|在-PARAM  | 0 .. *  |
|参数化查询 | 0..1  |
|在-PARAM  | 0..1  |
|===

== 执行ddl

针对数据库启用DDL查询。

<execute-ddl...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
|===

<execute-ddl...>的{​​{0}}子元素

[col="33,33,33",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 1..1  |
|===

== 批量执行

更新数据库中的数据。

<bulk-execute...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
|文件 |字符串 |否 |   |要加载的文件的位置。该文件可以指向类路径或磁盘上的资源。
|===

== 存储过程

在数据库中执行SQL语句。

<stored-procedure...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| config-ref  |字符串 |否 |   |定义JDBC连接的配置参数。
|源 |字符串 |否 |   |用于获取用于计算参数的值的表达式。默认值是空的，所以参数是从有效载荷中计算出来的。
|目标 |字符串 |否 |＃[有效内容]  |用于丰富当前消息的丰富表达式，其结果是SQL处理。
| transactionalAction  | transactionalActionType  |否 | JOIN_IF_POSSIBLE  |指示消息处理器如何处理事务。
|流 |布尔值 |否 | false  |指示结果集是否必须作为迭代器或映射列表返回。
| fetchSize  | integer  | no  |   |指示从结果集读取行时从数据库中提取多少行。当流媒体为真时，此属性是必需的;在这种情况下，使用默认值（10）。
| maxRows  |整数 |否 |   |设置此消息处理器为任何ResultSet对象生成的最大行数限制给定数量。如果超出限制，超出的行将被无声地丢弃。
| autoGeneratedKeys  |布尔值 |否 | false  |指示何时使自动生成的密钥可供检索。
| autoGeneratedKeysColumnIndexes  |字符串 |否 |   |以逗号分隔的列索引列表，指示自动生成的哪些键可供检索。
| autoGeneratedKeysColumnNames  |字符串 |否 |   |逗号分隔的列名称列表，指示应将哪些自动生成的密钥用于检索。
|===

<stored-procedure...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|动态查询 | 0..1  |
|模板查询-REF  | 0..1  |
|在-PARAM  | 0 .. *  |
|参数化查询 | 0..1  |
|在-PARAM  | 0..1  |
|出PARAM  | 0..1  |
| INOUT-PARAM  | 0..1  |
|===

== 模板查询

<template-query...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|名称 |名称（无空格） |是 |   |标识查询，以便其他元素可以引用它。
|===

<template-query...>的{​​{0}}子元素

[%header%autowidth.spread]
|===
| {名称{1}}基数 |说明
|动态查询
| 1..1
|
|参数的查询
| 1..1
|
|在-PARAM
| 0 .. *
|
|模板查询-REF
| 1..1
|
|在-PARAM
| 1 .. *
|
|===

== 连接属性

指定配置的自定义键值connectionProperties的列表。支持MEL表达式。


<connection-properties...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|属性 | 1 .. *  |
|===

==  JDBC用户定义的数据类型（UDT）

指定用于将数据传递给存储过程调用时要使用的用户定义的JDBC数据类型。如果您需要在存储过程中使用UDT，请在父元素`<db:data-types>`的子元素`<db:data-type>`中指定数据库配置中的数据类型。用户定义的数据类型参数名称（`name`）和类型id（`id`）必须如下例所示进行指定，并作为您调用的存储过程的参数。注意JDBC类型`STRUCT`被转换为映射的Java类。对于Java数组，不存在对SQL `ARRAY`的强制转换。


<data-types...>的{​​{0}}子元素

[%header,cols="3*",width=80%]
|===
| {名称{1}}基数 |说明
|的数据类型
| 1 .. *
|需要一个*name*，它是对JDBC数据类型的用户定义引用，以及数据类型的整数说明符*id*。
|===

===  <data-types>示例

[source,xml,linenums]
----
<db:oracle-config name="Oracle_Configuration" url="jdbc:oracle:thin:@54.175.245.218:1581:xe" user="user" password="4321" >
        <db:data-types>
            <db:data-type name="T_DEMO_OBJECTS" id="2003"/>
            <db:data-type name="T_DEMO_OBJECT" id="2002" />
        </db:data-types>
    </db:oracle-config>
----

[%header%autowidth,width=80%]
|===
| JDBC数据类型代码 | id
| {ARRAY {1}} 2003
| {BIGINT {1}}  -  5
| {BINARY {1}}  -  2
| BIT 	|  -  7
| {BLOB {1}} 2004年
| {BOOLEAN {1}} 16
| {CHAR {1}} 1
| {CLOB {1}} 2005年
| {DATALINK {1}} 70
| {DATE {1}} 91
| {DECIMAL {1}} 3
| {DISTINCT {1}} 2001年
| {双{1}} 8
| {FLOAT {1}} 6
| {INTEGER {1}} 4
| {JAVA_OBJECT {1}} 2000
| {LONGNVARCHAR {1}}  -  16
| {LONGVARBINARY {1}}  -  4
| {LONGVARCHAR {1}}  -  1
| {NCHAR {1}}  -  15
| {NCLOB {1}} 2011年
| {NULL {1}} 0
| {NUMERIC {1}} 2
| {NVARCHAR {1}}  -  9
| {OTHER {1}} 1111
| {REAL {1}} 7
| {REF {1}} 2006年
| {REF_CURSOR {1}} 2012年
| {ROWID {1}}  -  8
| {SMALLINT {1}} 5
| {SQLXML {1}} 2009年
| {STRUCT {1}} 2002年
| {TIME {1}} 92
| {TIME_WITH_TIMEZONE {1}} 2013年
| {TIMESTAMP {1}} 93
| {TIMESTAMP_WITH_TIMEZONE {1}} 2014年
| {TINYINT {1}}  -  6
| {VARBINARY {1}}  -  3
| {VARCHAR {1}} 12
|===

<data-type...>的{​​{0}}属性

[%header,cols="30a,70a",width=80%]
|===
| {名称{1}}说明
|名称 |引用JDBC类型

*  *Type:*字符串
*  *Required:*是的
*  *Default:*无

用于JDBC数据类型*java.sql.Types*的类中指定的数据类型的| id  |标识符

*  *Type:* int
*  *Required:*是的
*  *Default:*无
|===

== 共享资料

提供配置数据库连接池的方法。

<pooling-profile...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
| maxPoolSize  |整数 |否 |   |池在任何给定时间保持的最大连接数。
| minPoolSize  |整数 |否 |   |池在任何给定时间保持的最小连接数。
| acquireIncrement  |整数 |否 |   |确定池耗尽时一次尝试获取多少个连接。
| preparedStatementCacheSize  |整数 |否 | 5  |确定每个池连接缓存多少个语句。默认为0，这意味着语句缓存被禁用。
| maxWaitMillis  |字符串 |否 |   |客户端调用getConnection（）等待连接检入或获取的毫秒数游泳池已经耗尽。零意味着无限期地等待。
|===


== 通用配置

提供了为任何数据库供应商定义JDBC配置的方法。

<generic-config...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|名称 |名称（无空格） |是 |   |标识数据库配置，以便其他元素可以引用它。
| dataSource-ref  |字符串 |否 |   |引用JDBC DataSource对象。这个对象通常使用Spring创建。在使用XA事务时，必须提供XADataSource对象。
|网址 |字符串 |否 |   |用于连接数据库的网址。支持MEL表达式。
| useXaTransactions  |布尔值 |否 |   |指示创建的数据源是否必须支持XA事务。默认为false。
| driverClassName  |字符串 |否 |   |数据库驱动程序类的完全限定名称。支持MEL表达式。
| connectionTimeout  | int  |否 |   |此数据源在尝试连接到数据库时等待的最长时间，以秒为单位。值为零指定超时是缺省系统超时（如果有超时）;否则，它指定没有超时。
| transactionIsolation  |枚举 |否 |   |连接数据库时在驱动程序上设置的事务隔离级别。
|===

<generic-config...>的{​​{0}}子元素

[%header,cols="34,33,33"]
|===
| {名称{1}}基数 |说明
| pooling-profile  | 0..1  |提供配置数据库连接池的方法。
|连接属性 | 0..1  |为配置指定自定义键值connectionProperties的列表。支持MEL表达式。
|数据类型 | 0..1  |指定非标准的自定义数据类型。
|骡：抽象重新连接策略 | 0..1  | 
|===

==  Derby配置

<derby-config...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|名称 |名称（无空格） |是 |   |标识数据库配置，以便其他元素可以引用它。
| dataSource-ref  |字符串 |否 |   |引用JDBC DataSource对象。这个对象通常使用Spring创建。在使用XA事务时，必须提供XADataSource对象。
|网址 |字符串 |否 |   |用于连接数据库的网址。支持MEL表达式。
| useXaTransactions  |布尔值 |否 |   |指示创建的数据源是否必须支持XA事务。默认为false。
| driverClassName  |字符串 |否 |   |数据库驱动程序类的完全限定名称。支持MEL表达式。
| connectionTimeout  | int  |否 |   |此数据源在尝试连接到数据库时等待的最长时间，以秒为单位。值为零指定超时是缺省系统超时（如果有超时）;否则，它指定没有超时。
| transactionIsolation  |枚举 |否 |   |连接数据库时在驱动程序上设置的事务隔离级别。
|用户 |字符串 |否 |   |用于对数据库进行身份验证的用户。支持MEL表达式。
|密码 |字符串 |否 |   |用于对数据库进行身份验证的密码。支持MEL表达式。
|===

<derby-config...>的{​​{0}}子元素

[%header,cols="34,33,33"]
|===
| {名称{1}}基数 |说明
| pooling-profile  | 0..1  |提供配置数据库连接池的方法。
|连接属性 | 0..1  |为配置指定自定义键值connectionProperties的列表。支持MEL表达式。
|数据类型 | 0..1  |指定非标准的自定义数据类型。
|骡：抽象重新连接策略 | 0..1  | 
|===

==  Oracle Config

<oracle-config...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|名称 |名称（无空格） |是 |   |标识数据库配置，以便其他元素可以引用它。
| dataSource-ref  |字符串 |否 |   |引用JDBC DataSource对象。这个对象通常使用Spring创建。在使用XA事务时，必须提供XADataSource对象。
|网址 |字符串 |否 |   |用于连接数据库的网址。支持MEL表达式。
| useXaTransactions  |布尔值 |否 |   |指示创建的数据源是否必须支持XA事务。默认为false。
| driverClassName  |字符串 |否 |   |数据库驱动程序类的完全限定名称。支持MEL表达式。
| connectionTimeout  | int  |否 |   |此数据源在尝试连接到数据库时等待的最长时间，以秒为单位。值为零指定超时是缺省系统超时（如果有超时）;否则，它指定没有超时。
| transactionIsolation  |枚举 |否 |   |连接数据库时在驱动程序上设置的事务隔离级别。
|用户 |字符串 |否 |   |用于对数据库进行身份验证的用户。支持MEL表达式。
|密码 |字符串 |否 |   |用于对数据库进行身份验证的密码。支持MEL表达式。
|主机 |字符串 |否 |   |仅配置JDBC URL的主机部分（并保留默认JDBC URL的其余部分不变）。支持MEL表达式。
|端口 |整数 |否 |   |仅配置JDBC URL的端口部分（并保留默认JDBC URL的其余部分不变）。
|实例 |字符串 |否 |   |仅配置JDBC URL的实例部分（并保留默认JDBC URL的其余部分不变）。支持MEL表达式。
|===

<oracle-config...>的{​​{0}}子元素

[%header,cols="34,33,33"]
|===
| {名称{1}}基数 |说明
| pooling-profile  | 0..1  |提供配置数据库连接池的方法。
|连接属性 | 0..1  |为配置指定自定义键值connectionProperties的列表。支持MEL表达式。
|数据类型 | 0..1  |指定非标准的自定义数据类型。
|骡：抽象重新连接策略 | 0..1  | 
|===

==  MySQL配置

<mysql-config...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|名称 |名称（无空格） |是 |   |标识数据库配置，以便其他元素可以引用它。
| dataSource-ref  |字符串 |否 |   |引用JDBC DataSource对象。这个对象通常使用Spring创建。在使用XA事务时，必须提供XADataSource对象。
|网址 |字符串 |否 |   |用于连接数据库的网址。支持MEL表达式。
| useXaTransactions  |布尔值 |否 |   |指示创建的数据源是否必须支持XA事务。默认为false。
| driverClassName  |字符串 |否 |   |数据库驱动程序类的完全限定名称。支持MEL表达式。
| loginTimeout  | int  |否 |   |此数据源在尝试连接数据库时等待的最长时间（以秒为单位）。值为零指定超时是缺省系统超时（如果有超时）;否则，它指定没有超时。
| transactionIsolation  |枚举 |否 |   |连接数据库时在驱动程序上设置的事务隔离级别。
|用户 |字符串 |否 |   |用于对数据库进行身份验证的用户。支持MEL表达式。
|密码 |字符串 |否 |   |用于对数据库进行身份验证的密码。支持MEL表达式。
|数据库 |字符串 |否 |   |数据库的名称。除非配置完整的JDBC URL，否则必须进行配置。支持MEL表达式。
|主机 |字符串 |否 |   |仅配置JDBC URL的主机部分（并保留默认JDBC URL的其余部分不变）。支持MEL表达式。
|端口 |整数 |否 |   |仅配置JDBC URL的端口部分（并保留默认JDBC URL的其余部分不变）。
|===

<mysql-config...>的{​​{0}}子元素

[%header,cols="34,33,33"]
|===
| {名称{1}}基数 |说明
| pooling-profile  | 0..1  |提供配置数据库连接池的方法。
|连接属性 | 0..1  |为配置指定自定义键值connectionProperties的列表。支持MEL表达式。
|数据类型 | 0..1  |指定非标准的自定义数据类型。
|骡：抽象重新连接策略 | 0..1  | 
|===

== 在Param中

<in-param...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|姓名 |字符串 |是 |   |输入参数的名称。
|值 |字符串 |是 |   |参数的值。
|类型 | ExtendedJdbcDataTypes  |否 |   |参数类型名称。
|===



==  Out Param

<out-param...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|姓名 |字符串 |是 |   |输出参数的名称。
|类型 | ExtendedJdbcDataTypes  |否 |   |参数类型名称。
|===


==  Inout Param

<inout-param...>的{​​{0}}属性

[%header,cols="5*"]
|===
| {名称{1}}输入 |必 |缺省 |说明
|姓名 |字符串 |是 |   |输出参数的名称。
|值 |字符串 |是 |   |参数的值。
|类型 | ExtendedJdbcDataTypes  |否 |   |参数类型名称。
|===


== 另请参阅

* 访问 link:/mule-user-guide/v/3.7/database-connector[主数据库连接器文档]以获取概述，用户指南和示例。
