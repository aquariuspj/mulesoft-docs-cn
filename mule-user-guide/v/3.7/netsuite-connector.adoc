=  NetSuite连接器
:keywords: anypoint studio, connector, endpoint, netsuite

*_Select_*

用于NetSuite的MuleSoft Anypoint™连接器可同步数据并自动化NetSuite与第三方应用程序之间的业务流程，无论是在本地还是在云中。

*Release Notes*： link:/release-notes/netsuite-connector-release-notes[NetSuite连接器发行说明]

== 介绍

NetSuite是世界领先的基于云计算的商业管理软件提供商。 NetSuite通过一个完全集成的系统来帮助公司管理核心业务流程，这些系统涵盖ERP /财务，CRM，电子商务，库存等。

NetSuite连接器利用SuiteTalk WSDL提供基于SOAP的集成并生成NetSuite业务对象，利用不同的身份验证级别并支持错误处理。

== 先决条件

本文档假定您熟悉Mule， link:/mule-user-guide/v/3.7/anypoint-connectors[Anypoint™连接器]和 link:/anypoint-studio/v/5/index[Anypoint Studio界面]。为提高您对Studio的熟悉度，请考虑完成一个或多个 link:/anypoint-studio/v/5/basic-studio-tutorial[Anypoint Studio教程]。此外，本页假定您对 link:/mule-user-guide/v/3.7/mule-concepts[骡流]和 link:/mule-user-guide/v/3.7/global-elements[骡全球元素]有基本的了解。

要使用此连接器，您需要启用了Web服务功能的NetSuite帐户，并且您的开发计算机上安装了Anypoint Studio。

== 兼容性

NetSuite连接器v7.1.0兼容于：

[%header,cols="2*"]
|===
一个|
应用程序/服务

 为|
版

| *Mule Runtime*  | 3.5及更高版本
| *API*  | SuiteTalks 2015_2
|===

== 安装此连接器

. 在Anypoint Studio中，点击Studio任务栏中的Exchange图标。
. 点击Anypoint Exchange中的登录。
. 搜索连接器，然后单击安装。
. 按照提示安装连接器。

Studio有更新时，会在右下角显示一条消息，您可以单击该消息来安装更新。

但是，要在生产环境中使用NetSuite连接器，您必须具有以下两项之一：

*  {的{1}}。
*  *CloudHub*初级，专业或企业帐户。

联系 link:https://www.mulesoft.com/lp/contact[MuleSoft销售团队]获取其中任何一个。 （阅读更多关于 link:/mule-user-guide/v/3.7/installing-an-enterprise-license[安装企业许可证]的信息。）

== 创建一个新项目

在Mule应用程序项目中使用NetSuite连接器：

. 在Studio中，单击文件> MuleNew> Mule Project。
. 为您的新项目输入一个名称，并将其余选项保留为默认值。
+
image:netsuite_new_mule_project.png[netsuite_new_mule_project]
+
. 如果您计划使用Git，请为Studio项目选择*Create a .gitignore file*，并点击*Next*。
. 点击*Finish*创建项目。

== 配置NetSuite连接器全局元素

要在Mule应用程序中使用NetSuite连接器，您必须配置一个全局NetSuite元素，该应用程序中的所有NetSuite连接器都可以使用该元素（详细了解 link:/mule-user-guide/v/3.7/global-elements[全球元素]）。

在这方面没有多少变化，和以前一样（从v6.0.0开始），您会看到许多不同的全局元素，每个元素都代表对NetSuite进行身份验证的不同方式，但此版本包含一种新的身份验证方法：{ {0}}：

[%header,cols="2*"]
|===
| {配置{1}}说明
| *Login Authentication*  |在连接器发送的第一个请求上使用SuiteTalks登录API调用与NetSuite建立会话。
| *Request Level Authentication*  |使用此策略，您可以在每个请求的SOAP标头中发送用户凭证，而不是通过调用登录对NetSuite进行身份验证。
| *Single Sign-On Login Authentication*  |这是一个基于令牌的认证系统，可避免使用环境用户名和密码。这里你提供一个私钥和其他信息。然后连接器负责生成身份验证令牌，并通过第一次请求中的`ssoLogin` API调用与NetSuite建立会话。
| *Request Level Token Based Authentication*  |与单点登录验证类似，这是一个基于令牌的验证系统。但是，不使用通过openssl生成的privateKey，而是使用在NetSuite环境中建立的使用者和令牌密钥/密钥对。
|===

按照以下步骤在Mule应用程序中配置NetSuite连接器全局元素：

[tabs]
------
[tab,title="Studio Visual Editor"]
....
. Click the *Global Elements* tab at the base of the canvas.
. On the Global Mule Configuration Elements screen, click *Create*.
. In the "Choose Global Type" wizard, expand  *Connector Configuration,* and then select  *NetSuite: Login Authentication, NetSuite: Request Level Authentication,* *NetSuite: SSO Login Authentication,* or *NetSuite: Request Level Token Based Authentication* depending on your NetSuite authentication.
+
image:netsuite_global_configuration.png[netsuite_global_configuration]
+
. Click *Ok*.
. Enter global element properties.
.. For *NetSuite: Login Authentication* and *NetSuite: Request Level Authentication*:
+
[%header,cols="2*"]
|===
|Parameter |Description
|*Name* |Enter a name for the configuration with which to reference it later.
|*Email* |Enter the login email of the NetSuite UI.
|*Password* |Enter the corresponding password to log into NetSuite UI.
|*Account* |Enter the account ID of the SuiteTalk NetSuite web services. This is usually found within NetSuite sandbox UI under *Setup* > *Integration* > *Web Service Preferences.*
|*Role Id* |Enter the role ID for the user in SuiteTalk, which determines the Processor privileges.
|*Application Id* |Enter the application ID corresponding to the Integration record to be used (*New in NetSuite Connector version 7.0.0*).
|*Connection Timeout* |Enter the amount of time, in milliseconds, that the client must attempt to establish a connection before timing out.
|*Receive Timeout* |Enter the amount of time, in milliseconds, that the client must wait for a response before timing out.
|*Enable DataSense* |If you select this option, DataSense extracts metadata for NetSuite standard objects to automatically determine the data type and format that your application must deliver to, or can expect from, NetSuite. By enabling this functionality, Mule does the heavy lifting of discovering the type of data you must send to, or be prepared to receive from NetSuite. For more information, see link:/anypoint-studio/v/5/datasense[DataSense].
|*Endpoint* a|
Enter the URL of the service endpoint.

[NOTE]
Make sure that the endpoint uses the version of NetSuite that the connector supports.

|*Separator* |Enter the separator used to support the keys that are required to provide a better support for custom fields.
|===
+
.. For *NetSuite: SSO Login Authentication:* +
To use the SSO Login Authentication, enable this feature in your sandbox environment by NetSuite’s Support. NetSuite provides an SSO Kit and information on how to proceed with setting up private and public keys for use in generating authentication tokens. They also provide you with a Partner ID. After this setup is established, a mapping has to be created between the standard NetSuite credentials, the partner ID, company ID, and user ID. A developer or administrator should perform this mapping. It is not handled by the connector and it is only done once for each user ID that is allowed to authenticate using SSO within your company.
+
For this mapping, start by generating a token using the SSO Kit provided by NetSuite. To establish the mapping, invoke the SuiteTalks Web Service API call `mapSso` using an external Java application or any other method of your choice. A sample SOAP request of the `mapSso` API call looks as follows:
+
[source, xml, linenums]
----
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:messages_2015_1.platform.webservices.netsuite.com" xmlns:urn1="urn:core_2015_1.platform.webservices.netsuite.com">
   <soapenv:Header></soapenv:Header>
   <soapenv:Body>
      <urn:mapSso>
         <urn:ssoCredentials>
            <urn1:email>Your NetSuite email</urn1:email>
            <urn1:password>Your NetSuite password</urn1:password>
            <urn1:account>Your NetSuite account Id</urn1:account>
            <urn1:role internalId="The account role Id"></urn1:role>
            <urn1:authenticationToken>The token string generated using the SSO kit</urn1:authenticationToken>
            <urn1:partnerId>Your NetSuite partner Id</urn1:partnerId>
         </urn:ssoCredentials>
      </urn:mapSso>
   </soapenv:Body>
</soapenv:Envelope>
----
+
[%header,cols="2*"]
|===
|Parameter |Description
|*Name* |Enter a name for the configuration so it can be referenced later.
|*Partner Id* |Enter the partner ID used in the mapping process.
|*Partner Account* |Enter the account ID of the SuiteTalk NetSuite web services.
|*Company ID* |Enter the company ID used in the mapping process for the connector to generate a token.
|*User ID* |Enter the user ID used in the mapping process for the connector to generate a token.
|*Key File* |Enter the *privateKey* file name to pick up from the project. This file should be the *.der* file generated as per NetSuite’s specifications. This is used to encrypt the company ID and user ID into a token for *ssoLogin*.
|*Application Id* |Enter the application ID corresponding to the Integration record to be used (*New in NetSuite Connector version 7.0.0*).
|*Connection Timeout* |Enter the amount of time, in milliseconds, that the client must attempt to establish a connection before timing out.
|*Receive Timeout* |Enter the amount of time, in milliseconds, that the client must wait for a response before timing out.
|*Enable DataSense* |If you select this option, DataSense extracts metadata for NetSuite standard objects to automatically determine the data type and format that your application must deliver to, or can expect from, NetSuite. By enabling this functionality, Mule does the heavy lifting of discovering the type of data you must send to, or be prepared to receive from NetSuite. For more information, see link:/anypoint-studio/v/5/datasense[DataSense].
|*Endpoint* |Enter the URL of the service endpoint.
|*Separator* |Enter the separator used to support the keys that are required to provide a better support for custom fields.
|*Required Libraries* |Click Add File to add the SSO jar that you acquire via NetSuite support.
|===
+
.. For *NetSuite: Request Level Token Based Authentication:* +
To use this authentication mechanism you will need to set up an Integration Record within NetSuite and enable Token Based Authentication. This will automatically generate a consumer key and secret for you.
+
Furthermore you must set up an access token from within your NetSuite environment that combines the Integration Record with a User. This could be done assuming that your NetSuite account has the required permissions enabled in order to generate such tokens and login using them.
+
Please refer to NetSuite's Help Center or SuiteAnswers for detailed information on how to navigate NetSuite and set this up.
+
[%header,cols="2*"]
|===
|Parameter |Description
|*Consumer Key* |Enter the consumer key value for the token based authentication enabled integration record being used.
|*Consumer Secret* |Enter the consumer secret value for the token based authentication enabled integration record being used.
|*Token Id* |Enter the token id representing the unique combination of a user and integration generated within the NetSuite environment.
|*Token Secret* |Enter the respective token secret for the user/integration pair.
|*Account* |Enter the account ID of the SuiteTalk NetSuite web services. This is usually found within NetSuite sandbox UI under *Setup* > *Integration* > *Web Service Preferences.*
|*Connection Timeout* |Enter the amount of time, in milliseconds, that the client must attempt to establish a connection before timing out.
|*Receive Timeout* |Enter the amount of time, in milliseconds, that the client must wait for a response before timing out.
|*Enable DataSense* |If you select this option, DataSense extracts metadata for NetSuite standard objects to automatically determine the data type and format that your application must deliver to, or can expect from, NetSuite. By enabling this functionality, Mule does the heavy lifting of discovering the type of data you must send to, or be prepared to receive from NetSuite. For more information, see link:/anypoint-studio/v/5/datasense[DataSense].
|*Endpoint* a|
Enter the URL of the service endpoint.

[NOTE]
Make sure that the endpoint uses the version of NetSuite that the connector supports.

|*Separator* |Enter the separator used to support the keys that are required to provide a better support for custom fields.
|===
+
. Access the *Pooling Profile* tab to configure any settings relevant to managing multiple connections via a connection pool.
. Access the *Reconnection* tab to configure any settings relevant to reconnection strategies that Mule should execute if it loses its connection to NetSuite.
. Click *OK* to save the global connector configurations.
. Return to the Message Flow tab in Studio.

....
[tab,title="XML Editor"]
....
. Ensure that you include the NetSuite namespaces in your configuration file.
+
[source, xml, linenums]
----
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:netsuite="http://www.mulesoft.org/schema/mule/netsuite"
      xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core
               http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/netsuite
               http://www.mulesoft.org/schema/mule/netsuite/current/mule-netsuite.xsd">
 
</mule>
----
+
. Create a global NetSuite configuration outside and above your flows, using one of the following global configuration codes:
+
[source, xml, linenums]
----
<netsuite:config-login-authentication name="NetSuite" email="${email}" password="${password}" account="${account}" roleId="${roleId}" applicationId="${applicationId}"/>
----
+
[source, xml, linenums]
----
<netsuite:config-request-level-authentication name="NetSuite" email="${email}" password="${password}" account="${account}" roleId="${roleId}" applicationId="${applicationId}"/>
----
+
[source, xml, linenums]
----
<netsuite:config-sso-login-authentication name="NetSuite" email="${email}" password="${password}" account="${account}" roleId="${roleId}" applicationId="${applicationId}"/>
----
+
[source, xml, linenums]
----
<netsuite:config-request-level-token-based-authentication name="NetSuite" consumerKey="${consumerKey}" consumerSecret="${consumerSecret}" tokenId="${tokenId}" tokenSecret="${tokenSecret}" account="${account}" />
----
....
------

== 使用连接器

NetSuite连接器是基于操作的连接器，这意味着将连接器添加到流中时，需要配置连接器执行的特定Web服务操作。 NetSuite连接器v7.1.0支持50个操作。

=== 添加到流程中

. 在Anypoint Studio中创建一个新的Mule项目。
. 添加合适的Mule入站端点（例如HTTP侦听器或File端点）以开始流程。
. 将NetSuite连接器拖到画布上，然后选择它打开属性编辑器。
. 按如下所示配置连接器的参数：
+
[%header,cols="2*"]
|===
| {字段{1}}说明
| *Display Name*  |为应用程序中的连接器输入唯一标签。
| *Config Reference*  |连接到链接到此连接器的全局元素。全局元素封装有关到目标资源或服务的连接的可重用数据。选择您创建的全局NetSuite连接器元素。
| *Operation*  |选择此组件必须执行的操作。
|===

== 自定义字段DataSense

在NetSuite中，可以添加不同类型的自定义字段，并将这些自定义应用于不同的记录类型。启用DataSense后，NetSuite连接器将检索并显示这些字段。但请注意，我们不完全支持NetSuite用户可以定义的所有定制类型。
以下列表概述了我们所做和所处理的字段以及它们当前与记录类型的属性相关的位置。大多数情况下，您可以看到定制通常存在于名为_customFieldList_的列表字段中，但在某些情况下，这些可能驻留在其他位置。

=== 实体字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *CONTACT*  |联系人> customFieldList> customField
| *CUSTOMER*  |客户> customFieldList> customField
| *EMPLOYEE*  |雇员> customFieldList> customField
| *ENTITY_GROUP*  | EntityGroup> customFieldList> customField
| *PARTNER*  |合作伙伴> customFieldList> customField
| *PROJECT_TASK*  | ProjectTask> customFieldList> customField
| *VENDOR*  |供应商> customFieldList> customField
|===

=== 项目字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *ASSEMBLY_ITEM*  | AssemblyItem> customFieldList> customField
| *ENTITY_GROUP*  | EntityGroup> customFieldList> customField
| *INVENTORY_ITEM*  | InventoryItem> customFieldList> customField
| *KIT_ITEM*  | KitItem> customFieldList> customField
| *NON_INVENTORY_PURCHASE_ITEM*  | NonInventoryPurchaseItem> customFieldList> customField
| *NON_INVENTORY_RESALE_ITEM*  | NonInventoryResaleItem> customFieldList> customField
| *NON_INVENTORY_SALE_ITEM*  | NonInventorySaleItem> customFieldList> customField
| *OTHER_CHARGE_PURCHASE_ITEM*  | OtherChargePurchaseItem> customFieldList> customField
| *OTHER_CHARGE_RESALE_ITEM*  | OtherChargeResaleItem> customFieldList> customField
| *OTHER_CHARGE_SALE_ITEM*  | OtherChargeSaleItem> customFieldList> customField
| *SERVICE_PURCHASE_ITEM*  | ServicePurchaseItem> customFieldList> customField
| *SERVICE_RESALE_ITEM*  | ServiceResaleItem> customFieldList> customField
| *SERVICE_SALE_ITEM*  | ServiceSaleItem> customFieldList> customField
|===

===  CRM字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *CALENDAR_EVENT*  | CalendarEvent> customFieldList> customField
| *CAMPAIGN*  |广告系列> customFieldList> customField
| *ISSUE*  |问题> customFieldList> customField
| *MANUFACTURING_OPERATION_TASK*  | ManufacturingOperationTask> customFieldList> customField
| *PHONE_CALL*  | PhoneCall> customFieldList> customField
| *PROJECT_TASK*  | ProjectTask> customFieldList> customField
| *SOLUTION*  |解决方案> customFieldList> customField
| *SUPPORT_CASE*  | SupportCase> customFieldList> customField
| *TASK*  |任务> customFieldList> customField
|===

=== 交易主体字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *ASSEMBLY_BUILD*  | AssemblyBuild> customFieldList> customField
| *CASH_SALE*  | CashSale> customFieldList> customField
| *CUSTOMER_PAYMENT*  | CustomerPayment> customFieldList> customField
| *DEPOSIT*  |存款> customFieldList> customField
| *ESTIMATE*  |估计> customFieldList> customField
| *EXPENSE_REPORT*  | ExpenseReport> customFieldList> customField
| *INVENTORY_ADJUSTMENT*  | InventoryAdjustment> customFieldList> customField
| *INVOICE*  |发票> customFieldList> customField
| *ITEM_FULFILLMENT*  | ItemFulfillment> customFieldList> customField
| *ITEM_RECEIPT*  | ItemReceipt> customFieldList> customField
| *JOURNAL_ENTRY*  | JournalEntry> customFieldList> customField
| *OPPORTUNITY*  |商机> customFieldList> customField
| *PURCHASE_ORDER*  | PurchaseOrder> customFieldList> customField
| *PURCHASE_REQUISITION*  | PurchaseRequisition> customFieldList> customField
| *SALES_ORDER*  | SalesOrder> customFieldList> customField
| *TRANSFER_ORDER*  | TransferOrder> customFieldList> customField
| *VENDOR_BILL*  | VendorBill> customFieldList> customField
| *VENDOR_CREDIT*  | VendorCredit> customFieldList> customField
| *VENDOR_PAYMENT*  | VendorPayment> customFieldList> customField
| *VENDOR_RETURN_AUTHORIZATION*  | VendorReturnAuthorization> customFieldList> customField
| *WORK_ORDER*  | WorkOrder> customFieldList> customField
|===

=== 事务列字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *CASH_SALE*  | CashSale> itemList> item> customFieldList> customField
| *ESTIMATE*  |估计> itemList> item> customFieldList> customField
| *EXPENSE_REPORT*  | ExpenseReport> expenseList>费用> customFieldList> customField
| *INVOICE*  |发票> itemList> item> customFieldList> customField
| *ITEM_FULFILLMENT*  | ItemFulfillment> itemList> item> customFieldList> customField
| *ITEM_RECEIPT*  | ItemReceipt> itemList> item> customFieldList> customField
| *JOURNAL_ENTRY*  | JournalEntry> lineList> line> customFieldList> customField
| *OPPORTUNITY*  |商机> itemList> item> customFieldList> customField
| *PURCHASE_ORDER*  | PurchaseOrder> itemList> item> customFieldList> customField
| *PURCHASE_REQUISITION*  | PurchaseRequisition> itemList> item> customFieldList> customField
| *SALES_ORDER*  | SalesOrder> itemList> item> customFieldList> customField
| *TIME_BILL*  | TimeBill> customFieldList> customField
| *TRANSFER_ORDER*  | TransferOrder> itemList> item> customFieldList> customField
| *VENDOR_BILL*  | VendorBill> itemList> item> customFieldList> customField
| *VENDOR_CREDIT*  | VendorCredit> itemList> item> customFieldList> customField
| *VENDOR_PAYMENT*  | VendorPayment> itemList> item> customFieldList> customField
| *VENDOR_RETURN_AUTHORIZATION*  | VendorReturnAuthorization> itemList> item> customFieldList> customField
| *WORK_ORDER*  | WorkOrder> itemList> item> customFieldList> customField
|===

=== 交易项目选项

目前DataSense无法检测到NetSuite的事务项目选项。

=== 项目编号字段

目前DataSense无法检测到NetSuite的项目编号字段。

=== 其他自定义字段

[%header,cols="2*"]
|===
|记录类型 |自定义字段放置
| *ACCOUNT*  |帐户> customFieldList> customField
| *BIN*  | Bin> customFieldList> customField
| *CLASSIFICATION*  |分类> customFieldList> customField
| *EXPENSE_CATEGORY*  | ExpenseCategory> customFieldList> customField
| *ITEM_DEMAND_PLAN*  | ItemDemandPlan> customFieldList> customField
| *ITEM_SUPPLY_PLAN*  | ItemSupplyPlan> customFieldList> customField
| *LOCATION*  |位置> customFieldList> customField
| *MANUFACTURING_COST_TEMPLATE*  | ManufacturingCostTemplate> customFieldList> customField
| *MANUFACTURING_ROUTING*  | ManufacturingRouting> customFieldList> customField
| *NOTE*  |注意> customFieldList> customField
| *PROMOTION_CODE*  | PromotionCode> customFieldList> customField
| *SUBSIDIARY*  |子公司> customFieldList> customField
|===

== 示例用例

使用Mule应用程序在NetSuite中添加新的员工记录;使用登录验证。

image:NetSuiteDemoFlow.png[NetSuiteDemoFlow]

[tabs]
------
[tab,title="Studio Visual Editor"]
....
. Drag an *HTTP* connector into a new flow, and configure it as follows:
+
image:netsuite_http.jpg[netsuite_http]
+
[%header,cols="2*"]
|===
|*Field* |Value
|*Display Name* |HTTP (or any other name you prefer)
|*config-ref* |Configure a global element with the desired host and port, we use 0.0.0.0 and 8081 respectively
|*path* |/addEmployee
|===
+
. Drag the *NetSuite* connector onto the canvas, then select it to open the properties editor console.
. Click the *+* sign next to the *Connector Configuration* field to add a new NetSuite global element.
+
image:netsuite_demonetsuite1.jpg[netsuite_demonetsuite1]
+
. Configure the global element as follows:
+
[%header,cols="2*"]
|===
|Field |Value
|*Name* |NetSuite (or any other name you prefer)
|*Email* |<Your NetSuite Email>
|*Password* |<Your NetSuite password>
|*Account* |<Your NetSuite account>
|*Role Id* |Enter the ID of the role you use to login in SuiteTalk, which determines the Processor privileges.
|*Application Id* |Enter the application ID corresponding to the Integration record to be used (*New in NetSuite Connector version 7.0.0*).
|===
+
. In the properties editor of the NetSuite connector, configure the remaining parameters:
+
image:netsuite_addrecord.jpg[netsuite_addrecord]
+
[%header%autowidth.spread]
|===
|Field |Value
|*Display Name* |NetSuite (or any other name you prefer)
|*Config Reference* |NetSuite (name of the global element you have created)
|*Operation* |Add record
|*Record Type* |Employee
|===
+
. Drag a *Transform Message* transformer before the NetSuite connector, then click the component to open its properties editor.
. Once metadata has been retrieved, select the respective fields to populate for the Employee.
. The DataWeave script in your Transform Message component should look similar to the following: +
[source, json, linenums]
----
%dw 1.0
%output application/java
---
{
	email: inboundProperties."http.query.params".email,
	externalId:  inboundProperties."http.query.params".externalId,
	firstName:  inboundProperties."http.query.params".name,
	lastName:  inboundProperties."http.query.params".lastname,
	subsidiary: {
		internalId: 3
	}
}
----
. Add an *Object to JSON* transformer into the flow to capture the response from the NetSuite connector and display it as a HTTP response. 
. Run the project as a *Mule Application* (right-click the project name in the explorer, then select *Run As* > *Mule Application* ). 
. From a browser, enter the employee's e-mail address, externalId, lastname, and name in the form of the following query parameters:  `http://localhost:8081/addEmployee? email=<employee's email address> &externalId=<employee's externalId> &lastname= <employee's last name>&name=<employee's firstname>` 
. Mule conducts the query, and adds the Employee record to NetSuite.
....
[tab,title="XML Editor"]
....

. Add a *netsuite:config* element to your project, then configure its attributes according to the  table below.
+

[source, xml, linenums]
----
<netsuite:config-login-authentication name="NetSuite" email="email@youremail.com"
    password="netsuite_password" account="netsuite_account" roleId="netsuite_role"
    applicationId="netsuite_applicationId" doc:name="Netsuite"/>
----
+
[%header%autowidth.spread]
|===
|Attribute |Value
|*name* |NetSuite
|*email* |<Your NetSuite Email>
|*password* |<Your NetSuite password>
|*account* |<Your NetSuite account>
|*roleId* |Enter the ID of the role you use to login in SuiteTalk, which determines the Processor privileges.
|*Application Id* |Enter the application ID corresponding to the Integration record to be used (*New in NetSuite Connector version 7.0.0*).
|*doc:name* |NetSuite
|===
+
. Create a Mule flow with an HTTP endpoint, configuring the endpoint as follows:  
+
[source, xml, linenums]
----
<http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" path="accountWithCustomFields" doc:name="HTTP"/>
----
+
[%header,cols="2*"]
|====
|Attribute |Value
|*exchange-pattern* |request-response
|*host* |localhost
|*port* |8081
|*path* a|
`accountWithCustomFields`
|*doc:name* |HTTP
|====
+

. Add a *Transform Message* transformer to pass the message payload to NetSuite.
+
[source, xml, linenums]
----
<dw:transform-message doc:name="Transform Message"/>
----
+
. Add a *netsuite:add-record* element to your flow as follows:
+
[source, xml, linenums]
----
<netsuite:add-record config-ref="Netsuite" doc:name="Netsuite Add Record" recordType="EMPLOYEE"/>
----
+
. Configure the Transform Message through the Visual Editor. Switch the view to Message Flow view, then click the *Transform Message* transformer to set its properties.
. Once metadata is retrieved, select the respective fields to populate for the Employee.
. The script should look similar to the following: +
[source, json, linenums]
----
%dw 1.0
%output application/java
---
{
	email: inboundProperties."http.query.params".email,
	externalId:  inboundProperties."http.query.params".externalId,
	firstName:  inboundProperties."http.query.params".name,
	lastName:  inboundProperties."http.query.params".lastname,
	subsidiary: {
		internalId: 3
	}
}
----
. Add a *json:object-to-json-transformer* element to the flow to capture the response from the NetSuite connector and display it as an HTTP response.
+
[source, xml, linenums]
----
<json:object-to-json-transformer doc:name="Object to JSON"/>
----
+
. Run the project as a Mule Application (right-click project name, then select *Run As > Mule Application*). 
. From a browser, enter the employee's e-mail address, externalId, lastname, and name in the form of the following query parameters: `http://localhost:8081/accountWithCustomFields ?email =<employee's email address> &externalId=<employee's externalId> &lname= <employee's last name>&name=<employee's firstname>`
. Mule conducts the query, and adds the Employee record to NetSuite.
....
------

== 示例使用案例代码

[NOTE]
====
请注意，要使此示例代码生效，您必须手动配置*global element for your NetSuite connector*的以下值以匹配您的NetSuite实例：

* 电子邮件
* 密码
* 帐户
* 角色ID
* 应用程序ID
====

[source, xml, linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking" xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw" xmlns:netsuite="http://www.mulesoft.org/schema/mule/netsuite"
	xmlns:json="http://www.mulesoft.org/schema/mule/json"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/netsuite http://www.mulesoft.org/schema/mule/netsuite/current/mule-netsuite.xsd
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/dw http://www.mulesoft.org/schema/mule/ee/dw/current/dw.xsd
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd">
	<netsuite:config-login-authentication name="NetSuite" email="suchi.deshpande@mulesoft.com" password="Mules0ft1!" account="TSTDRV1372796" roleId="3" applicationId="250FA966-3A66-4512-87C6-4AF27B929F49" doc:name="NetSuite: Login Authentication"/>
	<http:listener-config name="HTTP_Listener_Configuration" host="localhost" port="8081" doc:name="HTTP Listener Configuration"/>
	<flow name="netsuite-demoFlow" >
        <http:listener config-ref="HTTP_Listener_Configuration" path="/addEmployee" doc:name="HTTP"/>
		<dw:transform-message doc:name="Transform Message">
			<dw:input-payload />
			<dw:set-payload><![CDATA[%dw 1.0
%output application/java
---
{
	email: inboundProperties."http.query.params".email,
	externalId:  inboundProperties."http.query.params".externalId,
	firstName:  inboundProperties."http.query.params".name,
	lastName:  inboundProperties."http.query.params".lastname,
	subsidiary: {
		internalId: 3
	}
}]]></dw:set-payload>
		</dw:transform-message>
		<netsuite:add-record config-ref="NetSuite" recordType="EMPLOYEE" doc:name="Netsuite Add Record"/><json:object-to-json-transformer doc:name="Object to JSON"/>
	</flow>
</mule>
----

其他代码示例== 

=== 使用异步操作

此代码示例演示如何使用`async-add-list`与`check-async-status`，`get-async-result`和`delete`操作一起使用自定义记录类型。

[NOTE]
====
请注意，对于此示例代码的工作方式，您必须使用您自己的自定义记录类型（或只是常规类型），并手动配置全局NetSuite配置的以下值以匹配您的NetSuite实例：

* 电子邮件
* 密码
* 帐户
* 角色ID
* 的applicationID
====

image:netsuite_async1.jpg[netsuite_async1]

[source, xml, linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:tracking="http://www.mulesoft.org/schema/mule/ee/tracking"
	xmlns:dw="http://www.mulesoft.org/schema/mule/ee/dw" xmlns:netsuite="http://www.mulesoft.org/schema/mule/netsuite"
	xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:spring="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/netsuite http://www.mulesoft.org/schema/mule/netsuite/current/mule-netsuite.xsd
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/tracking http://www.mulesoft.org/schema/mule/ee/tracking/current/mule-tracking-ee.xsd">
	<http:listener-config name="HTTP_Listener_Configuration"
		host="0.0.0.0" port="8081" doc:name="HTTP Listener Configuration" />
	 
	<netsuite:config-login-authentication
		name="NetSuite__Login_Authentication" email="${netsuite.email}"
		password="${netsuite.password}" account="${netsuite.account}" roleId="${netsuite.roleId}"
		applicationId="${netsuite.applicationId}" doc:name="NetSuite: Login Authentication" />

	 
	<flow name="asyncAddList" >
		    
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="/asyncAddList" doc:name="HTTP" />
		    
		<logger message="Process Started ..." level="INFO" doc:name="Logger" />
		    
		<netsuite:async-add-list config-ref="NetSuite__Login_Authentication"
			recordType="__customRecordType__customrecordcustomaccount__22"
			doc:name="Async Add List">
			        
			<netsuite:records-attributes>
				            
				<netsuite:records-attribute>
					                
					<netsuite:inner-records-attribute
						key="externalId">addListExt1</netsuite:inner-records-attribute>
					                
					<netsuite:inner-records-attribute
						key="name">addListName1</netsuite:inner-records-attribute>
					            
				</netsuite:records-attribute>
				            
				<netsuite:records-attribute>
					                
					<netsuite:inner-records-attribute
						key="externalId">addListExt2</netsuite:inner-records-attribute>
					                
					<netsuite:inner-records-attribute
						key="name">addListName2</netsuite:inner-records-attribute>
					            
				</netsuite:records-attribute>
				        
			</netsuite:records-attributes>
			    
		</netsuite:async-add-list>
		    
		<set-variable variableName="jobId" value="#[payload.getJobId()]"
			doc:name="Set Variable: jobId" />
		    
		<flow-ref name="check_async_status" doc:name="Check Async Status" />
	</flow>
	 
	<sub-flow name="check_async_status" >
		    
		<logger message="===== Checking status for jobId: #[flowVars.jobId] ====="
			level="INFO" doc:name="Logger" />
		    
		<until-successful maxRetries="180"
			failureExpression="#[payload.getStatus() == com.netsuite.webservices.platform.core.types.AsyncStatusType.PENDING || payload.getStatus() == com.netsuite.webservices.platform.core.types.AsyncStatusType.PROCESSING]"
			synchronous="true" doc:name="Until Successful" millisBetweenRetries="10000">

			        
			<processor-chain doc:name="Processor Chain">
				            
				<netsuite:check-async-status config-ref="NetSuite__Login_Authentication"
					jobId="#[flowVars.jobId]" doc:name="Check Async Status" />
				            
				<logger message="Status is: #[payload.getStatus()]" level="INFO"
					doc:name="Status" />
				        
			</processor-chain>
			    
		</until-successful>
		    
		<choice doc:name="Choice">
			        
			<when
				expression="#[payload.getStatus() == com.netsuite.webservices.platform.core.types.AsyncStatusType.FINISHED]">
				            
				<logger message="Records have been added successfully."
					level="INFO" doc:name="FINISHED" />

				        
			</when>
			        
			<otherwise>
				            
				<logger
					message="An error has been encountered for jobId: #[flowVars.jobId] Navigate to Setup &gt; Integration &gt; Web Services Process Status on your sandbox for more information."
					level="ERROR" doc:name="FAILED / FINISHED_WITH_ERRORS" />

				        
			</otherwise>
			    
		</choice>
	</sub-flow>
	 
	<sub-flow name="get_async_result" >
		    
		<http:listener config-ref="HTTP_Listener_Configuration"
			path="/getAsyncResult" doc:name="HTTP" />
		    
		<set-variable variableName="jobId"
			value="#[message.inboundProperties.'http.query.params'.jobId]"
			doc:name="Set Variable: jobId" />
		    
		<logger message="===== Results for jobId: #[flowVars.jobId] ====="
			level="INFO" doc:name="Logger" />
		    
		<netsuite:get-async-result config-ref="NetSuite__Login_Authentication"
			jobId="#[flowVars.jobId]" doc:name="Get Async Result" />
		    
		<set-payload value="#[payload.getWriteResponseList().getWriteResponse()]"
			doc:name="Get Response List" />
		    
		<foreach doc:name="For Each">
			        
			<logger
				message="Custom record with externalId: #[payload.getBaseRef().getExternalId()] and typeId: #[payload.getBaseRef().getTypeId()] ... Deleting it!"
				level="INFO" doc:name="Result Info" />
			        
			<netsuite:delete config-ref="Netsuite" doc:name="Delete">
				            
				<netsuite:base-ref type="CUSTOM_RECORD_REF" externalId="#[payload.getBaseRef().getExternalId()]">
					                
					<netsuite:specific-fields>
						                    
						<netsuite:specific-field key="typeId">#[payload.getBaseRef().getTypeId()]</netsuite:specific-field>
						                
					</netsuite:specific-fields>
					            
				</netsuite:base-ref>
				        
			</netsuite:delete>
			    
		</foreach>
		    
		<logger message="Process Complete" level="INFO" doc:name="Logger" />
	</sub-flow>
</mule>
----

*Code Description*

.  `netsuite:config-login-authentication`是NetSuite全局配置。
. 标记为"asyncAddList"的第一个流程是通过HTTP请求触发的。
.  `netsuite:async-add-list`为显示`externalIds`的`async-add-list`操作和我们为自定义记录定义的名称提供配置。
. 将`async-add-list`操作返回的`jobId`存储在名为"jobId"的流变量中。请参阅`set-variable`。
. 调用名为"check_async_status"的子流程来监视异步进程的状态。
.  `until-successful`块使用`check-async-result`操作查询NetSuite，以查看异步作业是完成还是待处理。这将循环执行多次定义的重试，并在满足条件后恢复对流量的控制。
.  `choice`路由器根据异步操作是否成功完成来引导消息。
. 在控制台中显示一条消息，通知异步过程成功。
. 如果控制台失败，则在控制台中显示一条消息。
. 第二个流也通过HTTP请求触发，并将`jobId`作为查询参数传递。
. 使用`get-async-result`操作使用保存的`jobId`获取异步过程的结果。
. 从`AsyncResult`对象中提取响应列表。
. 对于每个结果列表项，记录一些细节并删除我们添加的记录。
. 使用其`externalId`删除刚刚从NetSuite沙箱添加的自定义记录。


=== 使用搜索操作

在NetSuite中，`search`操作可用于执行*Basic Search*，*Joined Search*或*Advanced Search*。为此，您需要为要查询的记录类型实例化以下三种搜索类型之一：

[cols="2*"]
|===
| `<Record>SearchBasic` |用于基于特定于该类型的搜索过滤器字段对记录类型执行搜索。
| `<Record>Search` +
|用于基于特定于该类型的搜索过滤器字段以及与相关记录类型关联的其他记录类型执行对记录类型的搜索。
| `<Record>SearchAdvanced` +
|用于对指定搜索过滤器字段和/或搜索返回列或联合搜索列的记录类型执行搜索。使用高级搜索，您还可以返回现有的已保存搜索。
|===

这也适用于搜索的异步等效项`asyncSearch`操作。

==== 搜索分页支持

对于NetSuite连接器版本7.0.0，已将分页支持添加到`search`。

现在，连接器的搜索功能可以在一个操作中统一。其他与搜索相关的处理器已被删除。因此，`search`将始终检索整组结果。因此，用户需要使用`searchNext`或`searchMore`才能从后续页面获取其余记录。*not*返回类型也不同;处理器将输出一张地图列表，表示通过您的搜索条件获得的每条记录。

需要注意的一个重要方面是分页不能应用于`search`（`asyncSearch`）的异步等价物。这是由于实际的分页必须应用于`getAsyncResult`操作。这意味着只有第一页才会异步检索。此外，`getAsyncResult`对所有异步操作都是通用的。因此，我们甚至无法在此处应用分页，因为此操作的返回类型取决于调用的异步操作。

关于新的*search*配置，连接器与名为`fetchSize`的新属性相同：

[source, xml, linenums]
----
<netsuite:paged-search config-ref="NetSuite__Login_Authentication" searchRecord="CUSTOMER_BASIC" fetchSize="5" doc:name="Customer Basic Search"/>
----

====  ItemSearchAdvanced和returnSearchColumns

使用`search`时，连接器输出表示您的`search`操作返回的Record对象的地图列表。如果使用高级搜索并且`returnSearchColumns`标志设置为true，则NetSuite会返回包含搜索结果的`SearchRowList`。

但是，对于`ItemSearchAdvanced`，连接器不会执行此映射，只是向用户提供SearchRows。这是由于NetSuite中的ITEM可能具有各种类型，我们无法从`ItemSearchRow`中承担项目类型。对于任何其他类似`ITEM`的记录类型，也会出现此问题，但我们目前不知道其他记录类型。

基本搜索的示例==== 

在本例中，我们使用以下条件为客户（`CustomerSearchBasic`）设置了基本搜索操作：

*  `companyName`以"A"开头。
* 客户不是个人。
* 客户的优先级为50，由`customField`处理。

以下是Studio流程和相应的代码：

image:netsuite_basic_search.jpg[netsuite_basic_search]

[source, xml, linenums]
----
<http:listener-config name="HTTP_Listener_Configuration" host="0.0.0.0" port="8081" doc:name="HTTP Listener Configuration"/>
 
<netsuite:config-login-authentication name="NetSuite__Login_Authentication" email="${netsuite.email}" password="${netsuite.password}" account="${netsuite.account}" roleId="${netsuite.roleId}" applicationId="${netsuite.applicationId}" doc:name="NetSuite: Login Authentication"/>
 
<flow name="customer-basic-search">
    <http:listener config-ref="HTTP_Listener_Configuration" path="/basicSearch" doc:name="HTTP"/>
    <component class="CustomerBasicSearchComponent" doc:name="Create Customer Search Basic criteria"/>
    <netsuite:search config-ref="NetSuite__Login_Authentication" searchRecord="CUSTOMER_BASIC" fetchSize="5" doc:name="Customer Basic Search"/>
    <json:object-to-json-transformer doc:name="Object to JSON"/>
</flow>
----

*Java Component Code*

[source, java, linenums]
----
public class CustomerBasicSearchComponent implements Callable {
 
    @Override
    public Object onCall(MuleEventContext eventContext) throws Exception {
        CustomerSearchBasic searchCriteria = new CustomerSearchBasic();
 
        SearchStringField companyNameFilter = new SearchStringField();
        companyNameFilter.setOperator(SearchStringFieldOperator.STARTS_WITH);
        companyNameFilter.setSearchValue("A");
        searchCriteria.setCompanyName(companyNameFilter);
 
        SearchBooleanField isPersonFilter = new SearchBooleanField();
        isPersonFilter.setSearchValue(false);
        searchCriteria.setIsPerson(isPersonFilter);
 
        SearchCustomFieldList customFieldListFilter = new SearchCustomFieldList();
        List<SearchCustomField> customFieldList = new ArrayList<SearchCustomField>();
        SearchLongCustomField priority = new SearchLongCustomField();
        priority.setScriptId("custentity_cust_priority");
        priority.setOperator(SearchLongFieldOperator.EQUAL_TO);
        priority.setSearchValue(50l);
        customFieldList.add(priority);
        customFieldListFilter.setCustomField(customFieldList);
        searchCriteria.setCustomFieldList(customFieldListFilter);
 
        return searchCriteria;
    }
 
}
----

==== 连接搜索示例

这里的示例搜索所有具有定价连接（ItemSearch）的库存物品，其中价格率为10.00。 +
搜索标准在自定义Java组件中设置。

image:netsuite_joined_search.jpg[netsuite_joined_search]

[source, xml, linenums]
----
<flow name="item-search-pricing-join">
    <http:listener config-ref="HTTP_Listener_Configuration" path="/joinedSearch" doc:name="HTTP"/>
    <component class="ItemSearchPricingJoinComponent" doc:name="Create Item Search Pricing Join criteria"/>
    <netsuite:search config-ref="NetSuite__Login_Authentication" searchRecord="ITEM" doc:name="Item Search Pricing Join"/>
    <json:object-to-json-transformer doc:name="Object to JSON"/>
</flow>
----

*Java Component Code*

[source, java, linenums]
----
public class ItemSearchPricingJoinComponent implements Callable {
 
    @Override
    public Object onCall(MuleEventContext eventContext) throws Exception {
        ItemSearch searchCriteria = new ItemSearch();
 
        ItemSearchBasic basicCriteria = new ItemSearchBasic();
        SearchEnumMultiSelectField typeFilter = new SearchEnumMultiSelectField();
        List<String> typeList = new ArrayList<String>();
        typeList.add("_inventoryItem");
        typeFilter.setOperator(SearchEnumMultiSelectFieldOperator.ANY_OF);
        typeFilter.setSearchValue(typeList);
        basicCriteria.setType(typeFilter);
        searchCriteria.setBasic(basicCriteria);
 
        PricingSearchBasic pricingJoinCriteria = new PricingSearchBasic();
        SearchDoubleField rateFilter = new SearchDoubleField();
        rateFilter.setOperator(SearchDoubleFieldOperator.EQUAL_TO);
        rateFilter.setSearchValue(10.00d);
        pricingJoinCriteria.setRate(rateFilter);
        searchCriteria.setPricingJoin(pricingJoinCriteria);
 
        return searchCriteria;
    }
 
}
----

高级搜索示例==== 

该示例构造了一个简单的Java组件，该组件创建一个条件以在我们的NetSuite环境（EmployeeSearchAdvanced）中获得Employee保存搜索的结果。 NetSuite中每个保存的搜索都有一个特定的ID。在这里，我们使用scriptId customsearch130。

image:netsuite_code_example_search_advanced.jpg[netsuite_code_example_search_advanced]

[source, xml, linenums]
----
<flow name="employee-search-advanced-saved-search">
    <http:listener config-ref="HTTP_Listener_Configuration" path="/advancedSearch" doc:name="HTTP"/>
    <component class="EmployeeSearchAdvancedSavedComponent" doc:name="Create Employee Search Advanced Saved Search criteria"/>
    <netsuite:search config-ref="NetSuite__Login_Authentication" searchRecord="EMPLOYEE_ADVANCED" doc:name="NetSuite"/>
    <json:object-to-json-transformer doc:name="Object to JSON"/>
</flow>
----

*Java Component Code*

[source, java, linenums]
----
public class EmployeeSearchAdvancedSavedComponent implements Callable {
 
    @Override
    public Object onCall(MuleEventContext eventContext) throws Exception {
        EmployeeSearchAdvanced searchCriteria = new EmployeeSearchAdvanced();
 
        searchCriteria.setSavedSearchScriptId("customsearch130");
 
        return searchCriteria;
    }
 
}
----

===  NetSuite和DataWeave

NetSuite连接器的DataSense功能通过Transform Message组件与DataWeave相结合，使您可以直接与NetSuite环境集成。对于以下两个示例，我们使用JSON输入字符串并从中提取必要的数据以形成我们的NetSuite请求。

. 此示例代码通过以下JSON输入向NetSuite添加日记条目：
+

[source, json, linenums]
----
{
   "tranId":"SampleJournal123",
   "subsidiary":{
      "internalId":"1"
   },
   "customFieldList":{
      "customField":[
         {
            "StringCustomFieldRef__custbodytestbodyfield":"Sample Transaction Body Custom Field"
         }
      ]
   },
   "lineList":{
      "line":[
         {
            "account":{
               "internalId":"1"
            },
            "debit":100.0,
            "customFieldList":{
               "customField":[
                  {
                     "SelectCustomFieldRef__custcol_far_trn_relatedasset":{
                         "internalId":"1"
                     }
                  },
                  {
                     "StringCustomFieldRef__custcoltestcolumnfield": "Sample Transaction Column Custom Field 1"
                  }
               ]
            }
         },
         {
            "account":{
               "internalId":"1"
            },
            "credit":100.0,
            "customFieldList":{
               "customField":[
                  {
                     "SelectCustomFieldRef__custcol_far_trn_relatedasset":{
                         "internalId":"2"
                     }
                  },
                  {
                     "StringCustomFieldRef__custcoltestcolumnfield": "Sample Transaction Column Custom Field 2"
                  }
               ]
            }
         }
      ]
   }
}
----

+
连接器的"add"操作需要一个Map作为输入。 DataWeave脚本如下所示：

+
image:netsuite_dataweave1.jpg[netsuite_dataweave1]
+

. 在这个例子中，我们对基本搜索使用相同的场景，如前一节所述。然而，我们不是在java组件中构造标准，而是转换JSON字符串：
+

[source, json, linenums]
----
{
   "companyName": {
      "operator": "STARTS_WITH",
      "searchValue": "A"
   },
   "isPerson": false,
   "priority": {
      "operator": "EQUAL_TO",
      "searchValue": 50
   }
}
----

+
image:netsuite_code_example_dataweave02.jpg[netsuite_code_example_dataweave02]

== 另请参阅

* 详细了解如何使用 link:/mule-user-guide/v/3.7/anypoint-connectors[Anypoint连接器]。
* 访问 link:/release-notes/netsuite-connector-release-notes[NetSuite连接器]。
