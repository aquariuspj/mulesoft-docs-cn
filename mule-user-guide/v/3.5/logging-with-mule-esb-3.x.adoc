= 使用Mule ESB 3.x进行记录

骡3.1.2引入了新的日志功能：

每个应用程序的. 日志文件
. 应用程序可以覆盖默认日志记录配置
. 记录配置可以在不重新启动应用程序或Mule的情况下实时重新加载。

这些功能仅在*standalone* Mule中受支持，不支持嵌入式支持。

=== 详情：

. 支持log4j.xml和log4j.properties格式。请参阅http://wiki.apache.org/logging-log4j/Log4jXmlFormat
. 如果发现两者，则log4j.xml优先于log4j.properties
. 不支持即时切换日志配置格式。即在使用log4j.properties配置系统时删除log4j.xml不会触发重新配置。但是，单个应用程序重新部署可以更改日志记录格式（一旦应用程序完成重新部署，将会监视新配置）。
.  $ MULE_HOME / conf / log4j.xml / properties是顶级（容器）日志配置。
.  Mule每隔10秒监视日志配置文件的更改
. 对于即时发生的日志配置更改，配置文件必须是磁盘上的物理文件，而不是jar中的资源。如果配置文件有问题，日志将在启动时配置一次，而不支持动态重新配置。实际上，这仅仅意味着必须将log4j配置文件放在应用程序的“类”目录中。
. 如果日志记录配置文件中存在错误，则日志记录子系统将变得不可用并且不会生成输出。只需纠正错误并保存更改，Mule将在10秒内提取它们并重新配置日志记录。
. 默认情况下，为每个应用程序创建专用日志文件。所有日志文件都位于$ MULE_HOME / logs中
. 每个应用日志的默认文件名模式是'mule-app-myapp.log'，其中'myapp'是应用的名称。
. 默认appender是DailyRollingFileAppender，对于除今天之外的过去日期，datestamp以'yyyyy-MM-dd'格式添加到文件名中
. 应用可能会覆盖日志配置。*optionally*
. 适用于xml-与基于属性的配置首选项相同的规则
. 关于对日志记录配置文件apply的即时更改的相同规则
. 当应用覆盖日志配置时，它应该配置完整日志记录，包括根日志记录器，appender等。这也意味着可以利用log4j的全部功能。
. 为方便起见*$\{mule.home}*可以在文件路径的log4j配置设置中使用。
. 可以使用旧式单文件日志记录（请注意，动态日志重新配置也不受支持）。指定*-Dmule.simpleLog* JVM启动属性（属性的实际值无关紧要，只有它的存在）
