= 使用Ops Center管理Anypoint平台私有云版
:keywords:anypoint platform, on premises

本主题介绍如何使用Ops Center管理和监控Anypoint Platform私有云版。 Ops Center也是一个基于Web的管理，可让您执行以下类型的任务：

* 添加和删除服务器
* 查看日志并配置日志转发
* 监控系统稳定性和性能

== 访问Ops中心

. 转到以下网址：
+
----
https://{platform-host}:9500
----

. 输入您在安装过程中创建的管理员用户的电子邮件和密码。


== 添加其他服务器

通过添加服务器，即使安装完成后，也可以扩展群集。

. 登录Ops Center。

. 单击服务器选项卡，然后单击添加现有按钮。

. 选择要添加的节点的类型。
+
可用节点取决于安装中的节点数量。

. 点击继续。
+
Ops Center显示类似于以下的命令：
+
----
curl -s --tlsv1.2 --insecure "https://172.31.48.9:3009/t/8402020736a8a04dda29bc81dfcd5211/node" | sudo bash
----
+

. 在安装新服务器的机器上运行此命令。
+
	* 您必须从具有超级用户权限的帐户运行此命令。
	* 您一次只能在一台服务器上执行此安装。
+
执行此命令后，服务器将显示在Ops Center的列表中。

. 如有必要，请指定IP地址和设备。

. 选择服务器，然后单击开始安装以开始安装新服务器。

== 删除服务器

您可以从安装平台的群集中删除单个服务器。

[WARNING]
删除服务器还会删除部署在服务器上的所有应用程序。

. 登录Ops Center。
. 单击服务器选项卡
. 点击要删除的服务器的IP地址，然后选择删除。
. 确认您要删除服务器。

== 配置日志转发

Anypoint Platform私有云版使您能够转发服务器级别的日志数据。日志转发旨在将日志转发到本地第三方日志解决方案。不支持将日志数据转发到基于云的服务，如Splunk Cloud。

Anypoint Platform使用`rsyslog`来处理日志记录。要将这些日志转发到远程主机，执行以下操作

. 登录Ops Center。

. 点击右上角的管理员用户名。
+
image:ops_center_settings.png[]

. 选择设置，然后点击日志选项卡。

. 选择您要使用的协议。

. 输入目标IP地址和端口，然后单击添加。

== 监控稳定性和性能

Ops Center使您能够查看有关平台稳定性和性能的数据。

度量标准仪表板可用于这些应用程序组件：

*  Anypoint服务
* 群集
* 对象存储
* 荚
* 的PostgreSQL
* 的Redis

高分辨率度量标准的默认存储时间为30天。其他指标保留6个月至5年。

=== 查看指标

. 登录Ops Center。
. 点击监控标签。
+
默认情况下，Ops Center显示群集仪表板。

查看仪表板时，您可以通过从部分顶部的一系列下拉菜单中进行选择来浏览仪表板。可用选项取决于选定的仪表板。例如，在*Pods*信息中心中，您可以选择`namespace`和`podname`。


=== 更改图表中显示的时间刻度

要更改图表中显示的时间比例：

. 点击右上角的当前所选时间比例。
+
. 选择一个快速选项或提供开始日期和结束日期。


===  Anypoint服务仪表板

*Anypoint Services*仪表板显示平台不同子组件的指标，包括交换，API笔记本或主页。您可以通过特定的微服务来过滤数据。

该仪表板显示以下指标：

* 处理器
* 记忆
* 网络
* 文件系统

这些度量中的每一个都通过服务显示。

=== 群集信息仪表板

该仪表板显示组成您的平台群集的各个节点的指标。您可以按`nodename`过滤数据。

该仪表板显示以下指标：

* 整体CPU使用率
节点的*  CPU使用情况
* 个别CPU使用率
节点的* 内存使用情况
* 单独的内存使用情况
* 整体群集网络使用情况
* 节点的网络使用情况
* 单个节点网络使用情况
* 整个群集文件系统的使用情况
节点的* 文件系统使用情况
* 个别节点文件系统使用情况

这些度量标准具有不同的范围，具体取决于上下文：

* 总体指标显示整个节点集合的总数。
*  _by node_的度量标准将每个节点显示为同一图表上的单独曲线。
* 个别节点指标只会显示您在该部分顶部的*nodename*下拉列表中选择的节点。


=== 对象存储仪表板

*Object Store*仪表板显示有关组成对象库的不同节点的数据。它包括以下指标：

* 节点状态
* 读/写请求（每秒请求数）
* 读/写延迟
* 活动连接
* 不可用例外
已使用* 磁盘空间

处理读/写值的度量标准将读取和写入值显示为单独的曲线。

===  Pod信息中心

*Pod*仪表板显示运行平台不同服务的各个泊坞亭容器的数据。您可以按`namespace`或`podname`过滤数据。

该仪表板显示以下指标：

* 个别CPU使用率
* 单独的内存使用情况
* 个人网络使用情况
* 文件系统用法

所有这些指标都显示在选定的`namespace`和`podname`中。


===  PostgreSQL仪表板

*PostgreSQL*仪表板显示平台中包含的PostgreSQL服务器的数据。它显示以下指标：

每个类型的* 活动
* 高速缓存命中率
* 活动连接
* 缓冲器
* 冲突/死锁
*  PostrgreSQL容器每个Pod的CPU使用情况

每种类型的活动按照您选择的时间粒度级别显示获取，返回，插入，更新和删除行的不同曲线。


== 下载数据

以JSON格式下载本节中显示的数据：

. 点击Ops Center顶部的齿轮图标。
. 点击*Export*

image:managing-via-the-ops-center-f3b1c.png[]

或者，您可以选择*Save as...*以自定义名称下载此文件。您也可以选择*View JSON*选项来查看这些数据，而无需下载它。

== 重置您的密码

要更改登录Ops Center所需的密码，请执行以下操作：

. 输入重力效用：
+
该实用程序在平台安装期间添加。
+
----
sudo gravity enter
----

. 使用以下命令重置密码：
+
----
gravity site --insecure reset-password
----
+
该命令返回管理员的电子邮件和密码，例如：
+
----
password for admin@example.com has been reset to: xxxxxxxxx
----

== 另请参阅

*  link:/anypoint-private-cloud/v/1.6/prereq-workflow#device-requirements[设备要求]
