= 使用警报
:keywords: tcat, alerts

警报可让您了解可能需要您关注的事件，并允许您向其他管理员通知他们需要采取的措施。警报可以通过几种不同的方式触发：

* 服务器正在关闭
*  Web应用程序统计信息，例如平均处理时间
* 日志文件中的正则表达式
* 网址状态检查
符合特定阈值标准的*  JMX属性

发生警报时，会短暂弹出一个弹出窗口，指出发生了警报情况。您还可以配置各种警报目标，例如电子邮件地址或SNMP陷阱目标。

== 警报概述

单击警报选项卡以管理和查看警报。使用左侧的导航树查看引发的警报（即，已触发的警报），警报定义，目标和通知。使用相同的节点来管理警报，目标和通知。当您首次单击警报选项卡时，显示引发警报的窗格出现。

== 查看引发的警报

单击左侧导航树中的查看引发警报节点以查看已触发的警报。详细信息窗格将显示一个表格，其中包含有关每个警报的摘要信息，以及指示警报严重性的图标。尚未读取的警报显示为粗体，如下图所示。另外，未读警报的数量在窗格顶部以红色突出显示。

image:viewalert.png[viewalert]

详细信息窗格显示有关每个警报的以下信息：

* 警报的严重性。警报的严重程度在创建警报时设置，并且可以是以下各项之一：致命，重要，主要，次要，信息。
发生警报的* 服务器
* 提醒的名称
* 有关警报的摘要信息，例如内存不足警报
* 指示提醒警报的日期和时间的时间戳

点击警报行上的任意位置以选择该警报，并将该警报标记为已读。您也可以点击标记为阅读按钮将选中的警报标记为已读，或单击删除按钮删除已选中的警报。一旦读取了警报，其字体将从粗体变为平原。

每个警报左侧的图标指示警报的严重程度。将鼠标悬停在这些图标上可以查看它们代表的内容。简而言之，图标表示以下内容

* 字母"i"：信息警报
* 蓝色背景上的向下箭头：次要警报
* 黄色背景上的向上箭头：主要警报
* 橙色背景上的向上箭头：严重警报
* 红色背景上的火图标：致命警报

=== 新的提醒通知

警报屏幕在顶部以红色显示一条消息，通知您尚未读取的警报数量。有关未读警报的通知显示在所有控制台窗格的顶部。另外，当一个警报被触发时，会弹出一个简短的提示，指示已触发的警报。无论您当前正在查看的窗格如何，您都会看到此弹出窗口。假设您尚未查看该警报，新警报还会增加未读警报计数器。除了递增计数器之外，还会显示一条注释，指出刚刚添加的新警报的数量。

单击未读警报的通知以打开窗格以查看警报。

显示提示警报的窗格打开时，请注意，任何未读警报都以粗体显示在窗格顶部。已经读取的警报在窗格底部以普通字体显示，并且未读警报的计数器递减。还记录了新增警报的数量。点击提醒即可阅读。

== 定义警报

点击导航树中的"Alert Definitions"节点，查看当前设置的所有警报。在此窗格中，您可以创建新警报并编辑有关现有警报的详细信息。下图说明了查看和管理警报的详细信息窗格。该窗格显示现有警报的摘要，并提供用于添加新警报定义，控制警报和删除它们的按钮。

image:viewalert.png[viewalert]

详细信息窗格列出当前设置的所有警报，并显示有关每个警报的以下信息：

* 提醒的名称
* 警报的描述
* 警报严重性级别（致命，重要，主要，次要，信息）
* 警报类型（例如低内存，服务器关闭，Web应用程序处理时间等）。
* 警报适用的服务器的身份（如果有的话）。
* 当前警报状态（“活动”，“禁用”）。

=== 创建新警报

点击新建警报按钮创建一个新警报。 “添加警报”窗格显示“类型”字段。从类型字段的下拉列表中选择警报类型。

image:alrttype.png[alrttype]

以下是警报类型的名称以及它们可以配置触发条件的描述：

[%header,cols="2*"]
|===
| {键入{1}}说明
| JMX属性 | JMX属性超出，低于或匹配特定值
|日志正则表达式 |选定日志文件中的一行与特定正则表达式匹配
|内存不足 | JVM内存池超出阈值。
|服务器关闭 |服务器脱机或无响应。
| Server Up  |服务器联机。
|网址健康 |定期检查网址以确保它们在网络上可用。
| Web应用程序平均处理时间 | Web应用程序的平均请求处理时间。
| Web应用平均请求数/秒 | Web应用程序的平均每秒请求数。
| Web应用程序错误计数 | Web应用程序每隔一分钟的错误数。
|===

*Note:*目前，OpenJDK环境中不支持低内存警报。

选择警报类型后，该窗格将展开以显示输入描述警报的数据的其他字段。不同的警报类型有不同的数据字段。 “添加警报”窗格显示您选择的警报类型的相应字段，然后输入必需和可选数据。例如，下图显示了服务器关闭警报类型的“添加警报”窗格。

image:serverdown.png[服务器关闭]

输入警报的名称以及可选的描述。从“严重性”下拉列表中，选择警报的严重级别（致命，严重，主要，次要，信息）。对于“服务器”字段，选择警报适用的服务器（默认值为无），然后检查警报是否处于活动状态。需要数据的字段标有感叹号 image:warning.png[（警告）]，如果留为空白，则以红色突出显示。 （下图中标有必填项。）有关这些字段的更多信息，请参见下文。

下图显示了服务器停机警报类型的示例条目。一旦为警报类型选择了服务器关闭，屏幕将展开并显示必须输入的其他数据字段。虽然说明是可选的，但您必须为其他字段选择或输入数据。单击保存以保存新警报，或单击取消退出而不保存警报。

image:alrtdefs.png[alrtdefs]

以下说明设置警报时可能为特定字段选择或输入的数据。

==== 常见警报字段

如前所述，不同的警报类型可能会提示您输入不同的数据字段。大多数警报，无论类型如何，都包括以下通用字段：

* 服务器 - 此警报适用的服务器。
* 严重性 - 警报的严重程度是在创建警报时设置的，可以是以下各项之一：致命，严重，重大，轻微，信息。
* 活动 - 警报当前是否处于活动状态，如果不活动，警报不会触发此定义。

====  JMX属性

配置JMX属性值超过，低于或等于某个值时触发的警报。

*  MBean和attribute  - 监视的MBean名称和属性值。单击"Browse"查看MBean树并选择一个属性。
* 比较 - >（大于），<（小于）或=（等于）。
* 值 - 比较中用于确定此警报是否触发的值。
* 句点 - 检查值的毫秒数。

====  Log Regex

配置监视特定正则表达式的文件更改的警报。

* 日志文件 - 通配符表达式，例如"logs/*.log"，用于配置要监视的日志文件。该目录相对于CATALINA_HOME被解析。
* 正则表达式 - 在日志文件中查找的正则表达式。例如，键入"SEVERE"以查找所有SEVERE日志警告。

==== 内存不足

配置监视指定内存池的警报，以查看它是否超过特定的阈值百分比。

* 内存池 - 要监视的内存池，例如Total或PermGen。
* 阈值百分比 - 触发警报之前必须达到的内存池利用率的百分比。

==== 服务器关闭

配置在服务器停机或无响应时触发的警报。没有额外的配置选项。

==== 服务器启动

配置服务器联机时触发的警报。没有额外的配置选项。

==== 网址健康

配置监视URL状态的警报。用于监视特定的公共URL是否可访问。

* 网址 - 要定期检查的网址。
* 状态码 - 预期的HTTP状态码
* 周期 - 用于检查URL的时间段，以秒为单位。

====  Web应用平均处理时间

配置监视Web应用程序平均请求处理时间的警报。此值每分钟重新计算一次。

* 应用程序 - 要检查的Web应用程序。选择"All"以监控所有应用程序的请求时间。
* 比较 - >（大于），<（小于）或=（等于）。
* 值 - 比较中用于确定此警报是否触发的值。

====  Webapp平均请求数/秒

配置监控Web应用程序每秒平均请求的警报。此值每分钟重新计算一次。

* 应用程序 - 要检查的Web应用程序。选择"All"来监控所有应用程序每秒的请求。
* 比较 - >（大于），<（小于）或=（等于）。
* 值 - 比较中用于确定此警报是否触发的值。

====  Webapp错误计数

配置监控Web应用程序最后一分钟错误计数的警报。此值每分钟重新计算一次。

* 应用程序 - 要检查的Web应用程序。选择"All"以监视所有应用程序的错误计数。
* 比较 - >（大于），<（小于）或=（等于）。
* 值 - 比较中用于确定此警报是否触发的值。

=== 编辑警报

在管理警报摘要窗格中单击警报名称。该窗格以与创建警报相同的格式显示之前为警报输入的数据，并且可以进行所需的更改。

*Note*：您无法更改警报的名称。如果您需要更改警报的名称，则应删除它并使用新名称重新创建它。

有关警报字段的更多信息，请参阅下文。

=== 管理警报

要管理警报，请单击警报以选择它。选中时，复选框会显示在警报的复选框中。使用控制按钮来激活或禁用选定的警报。使用删除警报按钮删除选定的警报。在警报实际删除之前，会有一个对话框提示您确认删除。

== 另请参阅

*  https://www.mulesoft.com/tcat/download [Tcat下载]
*  https://support.mulesoft.com [联系MuleSoft]
