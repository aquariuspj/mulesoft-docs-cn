= 使用警报

== 概述

警报可让您了解可能需要您关注的事件，并允许您向其他管理员通知他们需要采取的措施。警报可以由描述，需要通知的人员的电子邮件地址，操作的优先级以及可选的SNMP地址和要运行的操作脚本组成。

服务级别协议（SLA）是警报的关键概念。 SLA定义您想要查看的目标对象的条件。本质上，SLA为目标条件定义值的高低阈值。当目标对象的条件值超出这些SLA阈值时，会引发警报。警报会触发SLA策略事件，并且此事件动态地将信息传送到系统的其他部分。

此外，当发生警报时，会短暂弹出一个弹出窗口，指示发生警报情况。

除了提醒之外，您还可以在目标对象和条件中设置手表。手表是一种安排，组织事件和对象的方式。阈值管理器会保留已设置手表的选项卡。它会检查手表对SLA提供的值。如果值超出SLA阈值级别或者值恢复到正常级别，则管理器触发事件​​。

== 提醒如何工作

您可以使用警报功能来保持您正在监视的所有服务器的运行状况。警报可让您了解服务器运行状况和功能的许多不同方面。通常，您可以设置警报，以便立即通知需要及时干预的关键情况（例如服务器关闭时），或者向您发出可能正在发生的潜在问题（如内存不足）的警告，以便您可以采取主动措施来解决问题。

您可以设置多种不同类型的警报。您在添加或创建新警报（覆盖在 link:/mule-management-console/v/3.5/defining-slas-and-alerts[定义SLA和警报]中）时指出警报类型。除了类型之外，还可以选择警报的严重性级别，对于大多数警报类型，您可以定义引发该警报的参数。

根据您想要查看的问题选择警报类型。下表显示了不同的警报类型。

[%header,cols="34,33,33"]
|===
|警报类型 |描述 |适用于
|自定义表达式 |根据目标对象自定义表达式a |
的评估结果发出警报
* 服务器
* 组

|异常 |当应用程序a |
发生指定类型的异常时发出警报
* 服务器
* 组

| JMX属性 |根据评估MBean a |
中的JMX属性值引发警报
* 服务器
* 组
* 集群

|内存不足 |当指定的内存池达到指定的内存阈值级别|
时发出警报
* 服务器
* 组

| Log Regex  |根据指定日志文件中的指定正则表达式提取警报a |
* 服务器
* 组
* 集群

|服务器关闭 |当指定的服务器或服务器组关闭时引发警报。当集群中的某个节点关闭|
时也会发出警报
* 服务器
* 组
* 集群

|服务器启动 |当指定的服务器或服务器组启动时发出警报。当集群中的某个节点出现|
时也会引发警报
* 服务器
* 组
* 集群

|线程池 |当指定的线程池达到指定的阈值比率a |
时引发警报
* 服务器
* 组

|网址健康 |当指定的网址位置返回特定的状态代码|
时引发提醒
* 服务器
* 组
* 集群

|===

== 提醒提醒

您为警报类型定义的参数决定引发警报的时间。参数是满足时会引发警报的条件。只有满足您为特定警报类型定义的条件时才会发出警报。

每种警报类型都有一组您定义的参数。警报类型参数因警报类型而异。一些参数对所有警报都是通用的。所有警报类型（URL健康除外）都要求您指定应将警报应用于的服务器或服务器组。另外，您可以将警报标记为活动或不活动。 （当您定义新的警报类型时，默认情况下它是活动的，除非您明确取消选中活动框。）控制台仅为标记为活动的警报类型发出警报。

例如，如果要在可用内存低于某个阈值点时引发警报，则应设置低内存警报类型，然后将阈值参数设置为您希望通知的百分比。

== 警报严重性级别

除了选择警报类型并指定其参数之外，还可以将严重性级别应用于每个警报。严重性级别使您能够从可能引发的其他问题较少的警报中快速找到更多严重情况。

您可以决定哪些警报对您立即发现至关重要，哪些警报虽然重要，但可以紧急处理。控制台对颜色代码进行颜色编码并标记致命，重要和重要警报，以便在突出警报显示中从次要和信息警报中脱颖而出。

下图显示了“查看引发的警报”窗格中显示不同警报类型严重性级别的方式。

image:severity.png[严重]

== 查看引发的警报

单击警报选项卡以管理和查看警报。在此屏幕上，您可以使用左侧导航树中的节点来查看和管理引发的警报（即，已触发的警报），已设置的所有警报的定义（无论是否已触发警报），警报目标以及警报通知。当您首次单击警报选项卡时，该窗格将显示引发警报。

单击左侧导航树中的“查看引发的警报”节点可查看已触发的警报。详细信息窗格将显示一个表格，其中包含有关每个警报的摘要信息，以及指示警报严重性的图标。尚未读取的警报显示为粗体，如下图所示。另外，未读警报的数量在窗格顶部以红色突出显示。

image:alerts-view.png[警报视图]

“查看引发的警报”窗格显示有关每个警报的以下信息：

* 警报的严重性。警报的严重程度在创建警报时设置，并且可以是以下各项之一：致命，重要，主要，次要，信息。
发生警报的* 服务器（或服务器组）
根据警报定义，* 警报的名称
根据警报定义，* 说明。
* 日期，这是一个时间戳，指示引发警报的日期和时间

点击警报行上的任意位置以选择该警报，并将该警报标记为已读。您还可以检查一个或多个警报，然后单击标记为读取按钮将这些检查的警报标记为已读，或者单击删除按钮删除已检查的警报。如前所述，读取警报后，其字体将从粗体变为纯字体。

每个警报左侧的图标指示警报的严重程度，如下图所示。将鼠标悬停在这些图标上可以查看它们代表的内容。

image:severity-chart.png[严重性-图表] +

简而言之，图标表示如下：

* 深蓝色背景上的字母"i"：信息警报
* 浅蓝色背景上的向下箭头：次要警报
* 橙色背景上的向上箭头：严重警报
* 黄色背景上的向上箭头：主要警报
* 红色背景上的火图标：致命警报

当警报左侧出现正面 image:add.png[（加）]符号时，表示有关触发警报的更多详细信息。单击此加号可查看有关警报的更多详细信息。在上图中，您可以看到有关两个警报的详细信息。

对于已触发的警报，详细信息部分显示与警报类型相关的信息。例如，它可能会显示以下数据：

* 源：警报的来源，例如代码缓存或Tenured Gen。警报的来源取决于警报类型。
* 阈值：适用于警报类型时触发警报的值。
* 实际值：触发警报的实际值。
* 触发时间：警报触发的次数。
* 网址：适用于URL健康警报
* 消息：错误消息，如果URL健康警报

您可能会同时显示多个警报的这些详细信息。单击减号以关闭警报的这些附加详细信息。

=== 新的提醒通知

警报屏幕在顶部以红色显示一条消息，通知您尚未读取的警报数量。有关未读警报的通知显示在所有控制台窗格的顶部。另外，当一个警报被触发时，会弹出一个简短的提示，指示已触发的警报。无论您当前正在查看的控制台窗格如何，您都会看到此弹出窗口。假设您尚未查看该警报，新警报还会增加未读警报计数器。除了递增计数器之外，还会显示一条注释，指出刚刚添加的新警报的数量。

单击下图中红色圈出的未读警报通知，打开窗格查看警报。 +
  image:alerts-unread-notice.png[提醒未读通知书]

显示提示警报的窗格打开时，请注意，任何未读警报都以粗体显示在窗格顶部。已经读取的警报在窗格底部以普通字体显示，并且未读警报的计数器递减。还记录了新增警报的数量。点击提醒即可阅读。
