= 使用流程

_flow_是一种配置，它包装组件（执行消息主要业务逻辑的类或Web服务）以及相关的路由器，过滤器和变换器。您可以使用“流程”选项卡来启动，停止或暂停流程并审核流程。

在左侧的导航树中选择All（对于所有服务器），以查看所有服务器的流量。

*[mmc:Mule 3.2]*选择全部以查看所有群集中的流量。

或者，要仅显示特定服务器的流量，请使用左侧的树导航到该服务器，然后单击服务器名称。

*[mmc:Mule 3.2]*要仅显示来自特定群集的流，请使用左侧的树导航到该群集，然后单击群集名称。

要查找特定流或流，请在搜索框中输入流名称 - 窗格中的表将立即显示与搜索字符串匹配的所有流。

== 清单流程

当您第一次打开“流量”选项卡时，表格会列出所选服务器或所有服务器的所有流量。例如，下图显示了所有服务器的流量。它还突出显示了用于停止和启动流程以及清除统计信息的按钮。

image:flows-1.png[流-1]

*[mmc:Mule 3.2]*该表还列出了所选群集或所有群集的所有流程。

image:cluster-flows.png[群集流]

如果您正在监控的某些服务器关闭，并且您选择了一组包含这些非运行服务器的服务器（如All），则可能会看到一条信息错误消息，如下图中突出显示的那条消息。

image:flows-errormsg.png[流-ERRORMSG]

“流量”表格包含以下信息：

* 星形图标：当以橙色着色时，星形图标表示这是最喜欢的流程。收藏流程出现在左侧收藏流程分组中。点击星形图标将其变为橙色或将其变为灰色。
* 圆形图标：绿色时表示流程正在运行。红色时表示流量已停止。
流的服务类型的圆圈图标也可能是黄色的，表示服务已暂停。
* 名称：流的名称。
* 类型：流的类型;例如，服务或简单的流程。
* 应用程序：使用流程的应用程序的名称。
* 服务器：托管服务的服务器。
*  Proc'd Events：流处理的消息数。
* 合计Rec'd Events：该流收到的消息总数。
* 平均处理时间：流量处理消息所用的平均时间量（以秒为单位）。
* 总处理时间：流程处理所有消息所用的总时间（以秒为单位）。

要对某个流程执行操作，请选中其复选框，然后单击表格列右上角的相应按钮。这些按钮让您控制流量（启动，停止或暂停流量）并清除流量统计信息。如果您单击清除统计按钮，将出现一个对话框，要求您确认是否要清除所选流量的统计信息。您可以继续或取消操作。

要查看有关流程的详细信息，请单击其名称。有几个窗格可用于查看有关特定服务的详细信息，可通过Summary and Endpoints选项卡进行访问。这些窗格将在下一节中讨论。

== 查看关于流程的更多信息

要查看更多关于流程的信息，请单击表格中的流程名称。 “流程细节”窗格打开并显示“摘要”选项卡，其中包含有关所选流程的更多特定信息无论流的类型如何，所有流都会显示摘要选项卡显示。尽管所有Flow类型都具有Endpoints选项卡，但如果不存在端点，端点显示可能为空。此外，“摘要”选项卡根据流类型显示不同的数据和图表集。

请注意，您可以展开“流程详细信息”窗格中的任何图表。点击图表本身并展开。单击展开的图表将其缩小回缩略图大小。例如，下图显示了如何在“收到的事件”缩略图图表中将其展开为全尺寸：

image:chart-resize.png[图调整大小]

=== 简单流程摘要信息

简单流程的Summary选项卡显示有关流程的关键信息，包括描述性信息，如流程名称，状态，描述，消息源和消息处理器。 （请参见下图。）该窗格还包括提供诊断数据的适当图表，例如关于接收到的同步事件和异步事件的数据，以及流程处理事件的时间指示器。

使用控制流程按钮启动，停止或暂停流程，使用清除统计按钮清除流量统计。

image:flows-summary.png[流-摘要]

=== 服务流摘要信息

作为服务的流的摘要选项卡显示附加信息，包括模型信息，入站和出站端点，组件信息和审计状态。它还包括提供诊断数据的图表（见下文）。

您可以使用“控制流”按钮来启动，暂停或停止服务。另外，对于作为服务的流程，您还可以通过单击“审核”按钮来启动，停止或暂停审核。单击“审核”选项卡查看有关服务正在处理的消息的实时信息。在任何时候，您都可以单击清除统计来清除“摘要”选项卡上显示的统计数据。

下图显示了作为服务的流的“摘要”窗格。

image:flows-service-summary.png[流服务，摘要]

=== 流量诊断图表

诊断表及其相关图表提供有关已执行事件和错误的信息，以及有关队列及其执行时间和错误的信息。您可以点击图表放大和缩小。这些表格包含以下信息：

*Events and Errors Information*
已执行事件：已执行事件的数量。
执行错误：执行错误的数量。
致命错误：致命错误的数量。
已发送的异步事件：已发送的异步事件的数量。
收到的异步事件：接收到的异步事件的数量。
发送的同步事件数：发送的同步事件数。
同步事件已收到：接收到的同步事件的数量。
收到的事件总数：收到的所有事件的总数。
发送的事件总数：发送的所有事件的总数

*Queues and Errors Information*
排队事件：当前排队的事件的数量。
最大队列大小：可以在队列中的最大事件数量。
平均队列大小：队列中的平均事件数量。
最短执行时间：执行事件的最短时间
最大执行时间：执行事件的最长时间
总执行时间：执行队列中事件的总时间。

== 管理终端

使用“端点”选项卡查看有关服务类型流入站和出站端点的详细信息。您还可以从“端点”窗格控制端点（即，启动或停止服务的端点）。

开发和调试应用程序或部署应用程序时，您可能想要控制端点。请参阅<<Use Case Scenarios for Controlling Endpoints>>。

image:flows-endpoints.png[流动的端点]

单击要控制的端点，然后从控制端点下拉列表中选择启动端点或停止端点。当前正在运行的端点用绿色圆圈标记。
当前未运行的端点标有红色圆圈。流的服务类型的端点也可以用黄色圆圈标记，表示服务已暂停。

请注意，入站和出站的每个端点都有其自己的表。识别和汇总信息首先出现在表格上方，然后是表格中的端点详细信息。识别和总结信息包括以下内容：

* 路由器：路由器的名称，例如filtering-outbound-router，首先出现。
* 接收总数：表示端点路由器收到的消息总数。
* 路由总数：路由器处理的路由消息总数。
* 未路由：已收到但未路由的邮件总数。
*  Caught Messages：端点路由器捕获的消息总数。

这些路由器总数下面的表格显示了使用该路由器的每个端点的详细信息。使用搜索框将端点显示限制为仅名称与您输入的字符串匹配或部分匹配的端点。

对于每个端点，详细信息表格显示如下：

* 类型，例如stdio或VM（虚拟机）。
* 地址，例如`system.out`。
* 连接器名称，例如`SystemStreamConnector`。
* 已过滤，表示是否过滤端点的布尔值。
* 同步，指示端点是同步还是异步的布尔值。
*  Transactions，一个布尔值，指示端点是否处理事务。

== 用例方案来控制端点

有几种情况可能需要停止并启动应用程序的端点。当服务具有多个端点时，这是一个特别有用的功能。

在开发过程中，停止端点可能会有所帮助，以便您可以专注于应用程序的特定部分。例如，您可能想要停止一个端点，以便消除潜在的错误来源。如果您正在追查应用程序性能问题，您可能会这样做。您已经确定应用程序消息的某些内容会减慢系统速度，但您需要隔离导致瓶颈的消息源。在这种情况下，您会经常停止某个端点，检查性能，然后启动该端点。你会重复这些步骤与不同的端点，直到发现问题。

在部署应用程序时，某些情况可能会迫使您验证应用程序在处理某些其他事件时是否未收到某些事件。为确保处理过程不受其他收到的邮件的干扰，您可能会停止相应的端点。验证一切正常后，您将重新启动已停止的端点。例如，您可能有一个在线购物网站，并希望它在节日期间专注于网络销售，而不是其他所有事情。在这些高销量的销售时间，您可能希望关闭一些合作伙伴或非直接的请求，并且通过停止某些终端，您也可以这样做。

测试使用多个端点来管理不同协议和要求的服务时，您也可以使用此功能。您可能希望在进行某些测试时停止HTTP外部端点，以便该服务不会暴露给外部世界，从而不被使用。与此同时，您希望保持其他内部端点的运行（这些端点位于防火墙之内或之后，例如JMS端点），以便您可以继续进行测试。

link:/mule-management-console/v/3.2/maintaining-the-server-application-repository[<< Previous：*维护服务器应用程序库*]

link:/mule-management-console/v/3.2/analyzing-flow-processing-and-payloads[下一步：*分析流量处理和有效载荷* >>]
