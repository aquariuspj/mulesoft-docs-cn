=  HL7 EDI连接器参考



== 配置
---
[[config]]
=== 配置


==== 参数

[%header%autowidth.spread]
|===
| 姓名 | 类型 | 描述 | 默认值 | 必需
|名称 | 字符串 | 此配置的名称。连接器使用该名称引用配置。 |  | x
| 连接| 连接
  | 可以提供给此配置的连接类型。 |  | x
| 到期策略a |  ExpirationPolicy  |  配置动态配置实例在运行时认为有资格到期之前可保持空闲的最短时间。这并不意味着该平台会在符合条件的时刻过期。运行时将在实际情况下实际清除实例。 |   |
|  Mule应用程序名称空间ID（MSH-3-1 / MSH-5-1）在消息头（MSH段）中为Mule应用程序名称空间ID。| 字符串 |  。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH接收应用程序标识名称空间标识必须与此值匹配。在发送端，除非在发送配置或消息参数中重写，否则此值将用作MSH发送应用程序标识名称空间标识。 |   |
|  Mule应用程序通用ID（MSH-3-2 / MSH-5-2）a | 字符串 |  消息标题（MSH段）中Mule的应用程序通用ID。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH接收应用程序标识通用ID必须与此值匹配。在发送端，除非在发送配置或消息参数中重写，否则此值将用作MSH发送应用程序标识通用标识。 |   |
|  Mule应用程序通用ID类型（MSH-3-3 / MSH-5-3）a | 字符串 |  应用程序通用ID在消息头（MSH段）中输入Mule。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH接收应用程序标识通用标识类型必须与此值匹配。在发送端，此值将用作MSH发送应用程序标识通用标识类型，除非在发送配置或消息参数中被覆盖。 |   |
| 合作伙伴应用程序名称空间ID（MSH-3-1 / MSH-5-1）在消息头（MSH段）中，合作伙伴的| 字符串 |  应用程序名称空间ID。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH发送应用程序标识名称空间标识必须与此值匹配。在发送端，除非在发送配置或消息参数中重写，否则此值将用作MSH接收应用程序标识名称空间标识。 |   |
| 合作伙伴应用程序通用ID（MSH-3-2 / MSH-5-2）a | 字符串 |  应用程序通用ID用于合作伙伴消息标题（MSH段）。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH发送应用程序标识通用标识必须与此值匹配。在发送端，除非在发送配置或消息参数中重写，否则此值将用作MSH接收应用程序标识通用标识。 |   |
| 合作伙伴应用程序通用ID类型（MSH-3-3 / MSH-5-3）a | 字符串 |  应用程序通用ID类型用于合作伙伴消息标题（MSH段）。如果设置了此值，则会影响发送和接收消息处理。在接收端，MSH发送应用程序标识通用标识类型必须与此值匹配。在发送端，除非在发送配置或消息参数中重写，否则将此值用作MSH接收应用程序标识通用标识类型。 |   |
| 模式定义a | 字符串数组 |  模块要使用的模式的路径列表。路径可以是文件系统或类路径。 |   | x
| 消息结构映射路径的事件和消息a | 字符串 |  定义从事件代码到消息代码到消息结构标识符的映射的YAML文件的路径。如果使用多个消息结构，则该映射定义支持使用MSH-9-1和MSH-9-2来确定消息中不存在MSH-9-3时的消息结构。如果在消息结构用于分析所有消息的模式中仅存在单个消息结构，并且MSH-9-3和MSH-9-2值存在于消息中，则MSH-9-1和MSH-9-2值是忽略。 |   |
|  HL7消息字符编码| 枚举，其中之一：

**  ASCII
**  BIG_5
**  EUC_KR
**  EUC_TW
**  GB_18030
**  ISO_8859_1
**  ISO_8859_15
**  ISO_8859_2
**  ISO_8859_3
**  ISO_8859_4
**  ISO_8859_5
**  ISO_8859_6
**  ISO_8859_7
**  ISO_8859_8
**  ISO_8859_9
**  JIS0208
**  JIS_X0201
**  JIS_X0212
**  UTF_16
**  UTF_32
**  UTF_8
|   HL7消息的字符编码。当MSH-18不存在时，它被用作接收消息的默认值。当MSH-18不在发送消息数据中时，它也被用作发送消息的默认值。 |   ASCII  |
| 为数据键禁用数字前缀a | 布尔值 |  将分段和组标识符直接用作数据中的键，而不是使用位置值作为前缀。 |   true {{4 }}
| 所需的处理ID a | 枚举，其中之一：

**  DEBUGGING
**  PRODUCTION
**  TRAINING  |  匹配MSH-11-1处理ID的值。如果设置，则只接受具有指定处理ID的消息进行处理;具有其他处理ID值或没有指定处理ID的邮件将被拒绝，但有一个例外。 |   |
| 通用扩展段的模式名称| 字符串 |  用于将段名称视为通用扩展段的Java常规模式。如果指定，则匹配此模式的段名称将被允许在消息中的任何位置并被转换为元素和组合的字符串值映射。 |   |
| 当所需值缺少| 布尔值 |  时失败当所需值缺失标志时失败。如果为true，则具有此错误的消息将被拒绝;如果为false，则该值将被忽略，并且该消息不会被拒绝。无论是哪种情况，都会记录错误并在ERR段中报告。 |   false  |
| 当值长度超出允许范围a | 布尔 |  时，失败当接收值长度超出允许范围标志时。如果为true，则具有此错误的消息将被拒绝;如果为false，则无论如何都会使用该值，并且不会拒绝该消息。无论是哪种情况，都会记录错误并在ERR段中报告。 |   false  |
| 当值a |  Boolean  |  中的无效字符在接收值包含无效字符标志时失败。如果为true，则具有此错误的消息将被拒绝;如果为false，则该字符被传递或替换，并且该消息不被拒绝。无论哪种情况，都会在ERR段中报告错误。 |   false  |
| 当值太多重复a | 布尔 |  失败时，接收值重复太多次。如果为true，则具有此错误的消息将被拒绝;如果为false，则接受该值，并且不会拒绝该消息。无论哪种情况，都会在ERR段中报告错误。 |   false  |
| 消息a | 布尔 |  中的未知段在消息中存在未知段时失败。如果为true，则具有此错误的消息将被拒绝;如果为false，则该段将被忽略，并且该消息不会被拒绝。无论哪种情况，都会在ERR段中报告错误。 |   false  |
| 当消息集合|  Boolean  |  中的分段出现故障时，失败当消息集合中的分段出现故障时。如果为true，则具有此错误的消息将被拒绝;如果为false并且段可以重新排序，则不会拒绝该消息。无论哪种情况，都会在ERR段中报告错误。 |   false  |
| 当消息集合| 布尔 |  中包含的未使用的段落在消息集合中包含标记为未使用的段时失败。如果为true，则具有此错误的消息将被拒绝;如果为false，则不会拒绝该消息，并忽略未使用的段。无论哪种情况，都会在ERR段中报告错误。 |   false  |
| 当片段a | 布尔 |  的重复次数过多时，会在段中出现过多次消息时失败。如果为true，则具有此错误的消息将被拒绝;如果为false，则不会拒绝该消息。无论哪种情况，都会在ERR段中报告错误。 |   false  |
|===


[[config_connection]]
== 连接类型


=== 参数

[%header%autowidth.spread]
|===
| 姓名 | 类型 | 描述 | 默认值 | 必需
| 重新连接| 重新连接 |  部署应用程序时，将在所有连接器上执行连接测试。如果设置为true，则在耗尽关联的重新连接策略后，如果测试未通过，则部署将失败。 |   |
|===

=== 相关操作

* 读
* 写

== 操作

[[read]]
== 阅读

`<hl7:read>`


=== 参数

[%header%autowidth.spread]
|===
| 姓名 | 类型 | 描述 | 默认值 | 必需
| 配置 | 字符串 | 要使用的配置的名称。 |  | x
| 阅读内容a | 二进制 |   |   `#[payload]`  |
| 目标变量a | 字符串 |  存储操作输出的变量的名称。 |   |
| 目标值a | 字符串 |  一个表达式，用于评估操作的输出并将该表达式的结果存储在目标变量中。 |   `#[payload]` {{ 5}}
| 重新连接策略|  *重新连接
*  reconnect-forever  |  发生连接错误时的重试策略。 |   |
|===

=== 输出

[cols=".^50%,.^50%"]
|===
| 输入| 对象
|===

=== 用于配置

* 配置

=== 抛出

*  HL7：RETRY_EXHAUSTED
*  HL7：UNKNOWN
*  HL7：解析
*  HL7：SCHEMA
*  HL7：连接
*  HL7：WRITE


[[write]]
== 收件

`<hl7:write>`


=== 参数

[%header%autowidth.spread]
|===
| 姓名 | 类型 | 描述 | 默认值 | 必需
| 配置 | 字符串 | 要使用的配置的名称。 |  | x
| 撰写内容a | 对象 |   |   `#[payload]`  |
| 流式策略一个|  *可重复的内存流
* 重复-文件的存储流
* 非重复流 |  配置使用可重复的流及其行为。 |   |
| 目标变量a | 字符串 |  存储操作输出的变量的名称。 |   |
| 目标值a | 字符串 |  一个表达式，用于评估操作的输出并将该表达式的结果存储在目标变量中。 |   `#[payload]` {{ 5}}
| 重新连接策略|  *重新连接
*  reconnect-forever  |  发生连接错误时的重试策略。 |   |
|===

=== 输出

[cols=".^50%,.^50%"]
|===
| 输入| 二进制文件
|===

=== 用于配置

* 配置

=== 抛出

*  HL7：RETRY_EXHAUSTED
*  HL7：UNKNOWN
*  HL7：解析
*  HL7：SCHEMA
*  HL7：连接
*  HL7：WRITE



== 类型

[[Reconnection]]
=== 重新连接

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 部署失败| 布尔值 | 部署应用程序时，将在所有连接器上执行连接测试。如果设置为true，则在耗尽关联的重新连接策略后，如果测试未通过，则部署将失败。 |   | 
| 重新连接策略|  *重新连接
*  reconnect-forever  | 要使用的重新连接策略。 |   | 
|===

[[reconnect]]
=== 重新连接

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 频率a | 数字 | 以毫秒为单位重新连接的频率。 |   | 
| 统计| 数字 | 要进行多少次重新连接尝试。 |   | 
|===

[[reconnect-forever]]
=== 重新连接Forever

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 频率a | 数字 | 以毫秒为单位重新连接的频率。 |   | 
|===

[[ExpirationPolicy]]
=== 到期政策

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 最大空闲时间a | 数字 | 动态配置实例在被认为有资格到期之前应被允许闲置的最长时间的标量时间值。{{3 }} | 
| 时间单元a | 枚举，其中一个：

** 纳秒
**  MICROSECONDS
**  MILLISECONDS
** 秒后
**  MINUTES
**  HOURS
**  DAYS  | 限定maxIdleTime属性 |   | 
的时间单位
|===

[[repeatable-in-memory-stream]]
内存流中可重复=== 

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 初始缓冲区大小a | 数字 | 分配的内存量消耗流并提供对其的随机访问。如果流包含的数据超过了可以放入此缓冲区的数据量，缓冲区将根据bufferSizeIncrement属性进行扩展，并且上限为maxInMemorySize。 |   | 
| 缓冲区大小增加一个| 数字 | 如果缓冲区大小超过其初始大小，则缓冲区大小将扩展多少。将值设置为零或低意味着不会展开缓冲区，并且如果缓冲区已满，则会引发STREAM_MAXIMUM_SIZE_EXCEEDED错误。 |   | 
| 最大缓冲区大小a | 数字 | 要使用的最大内存量。如果需要更多内存，则会发生STREAM_MAXIMUM_SIZE_EXCEEDED错误。值小于或等于零意味着没有限制。 |   | 
| 缓冲单元a | 枚举，其中之一：

**  BYTE
**  KB
**  MB
**  GB  | 表示所有这些属性的单位 |   | 
|===

[[repeatable-file-store-stream]]
=== 可重复的文件存储流

[%header%autowidth.spread]
|===
| 字段 | 类型 | 描述 | 默认值 | 必需
| 内存中的最大大小a | 数字 | 定义流应用于将数据保留在内存中的最大内存。如果超过该数量，则会开始缓冲磁盘上的内容。 |   | 
| 缓冲单元a | 枚举，其中之一：

**  BYTE
**  KB
**  MB
**  GB  | 表示maxInMemorySize的单位 |   | 
|===

== 另请参阅

*  https://forums.mulesoft.com [MuleSoft论坛]。
*  https://support.mulesoft.com [联系MuleSoft支持]。
