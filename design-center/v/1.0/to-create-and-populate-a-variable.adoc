= 关于创建变量（Design Center）

== 关于变量

变量用于存储在Mule应用程序流中使用的每个事件值。存储的数据可以是任何支持的数据类型，例如对象，数字或字符串。也可以使用`message`关键字），当前消息有效载荷（使用`payload`关键字）或仅保存当前消息属性（使用`attributes`关键字） 。您甚至可以使用DataWeave表达式作为值。但是，不允许使用关键字`vars`（例如`vars.someOtherVar`）。

您可以通过以下方式创建或更新变量：

* 使用Set Variable组件。
* 在操作中使用目标变量，例如对文件连接器的读操作或对数据库连接器的存储操作。

还有其他一些设置变量的方法。但是，它们使用的频率要少得多。

创建变量后，您可以在创建它的Mule流的范围内访问和使用它，其中包括通过Flow Ref组件连接的任何流。

*  `vars`：用于访问变量的关键字，例如，通过Mule组件（如Logger）中的DataWeave表达式或来自操作的Input或Output参数。如果变量的名称是`myVar`，则可以像这样访问它：`vars.myVar`

请注意，Mule事件中的变量与DataWeave脚本中定义的变量不同，后者对脚本而言是本地的，并且在其外部不可访问。

== 关于设置变量组件

Set Variable组件用于创建或更新一个变量以存储在Mule应用程序流中使用的值。您可以存储简单的文字值，如字符串或消息，消息负载或属性对象。例如，您可以存储消息的原始有效内容（在处理消息之前），以便稍后在流程中或错误处理程序中使用它。

有关详细信息，请参阅本主题最后的*See also*部分链接到的"About Set Variable"。

使用目标参数增强数据== 

在Mule应用程序中创建流时，可能需要将数据存储在变量中，以便流中的任何组件都可以使用它。非无效操作（例如对文件连接器的读取操作）可以将它们返回的消息数据存储在变量中。一旦定义，用目标参数创建的变量就可以在流程中使用，并且可以像访问任何其他变量一样访问它们。

您经常通过这些参数定义变量：

* 目标（`target`）：要存储消息数据的变量的名称。名称只能包含数字，字符和下划线。例如，名称中不允许使用连字符。
* 目标值（`targetValue`）：要存储在目标变量中的数据的值。默认情况下，该值是消息负载（`payload`）。该字段接受变量接受的任何值：任何支持的数据类型，DataWeave表达式，关键字`payload`，`attributes`和`message`，但不是关键字`vars`。

理解设置目标变量会改变流程中消息的典型过程非常重要。通常情况下，操作会输出与收到的输入不同的消息。但是，当您从操作设置变量时，操作会向输出中的_next_组件输出与接收到的输入相同的消息。例如，假设您有一个由组件A组成的流，然后是组件B，目标值为`myMessage`，然后是组件C.在这种情况下，组件C将收到B从A接收到的相同消息。

在此映像中，FTP连接器的读取操作将其有效载荷存储在变量`myVar`中：

image::ftp-read-output-target.png[]

. 目标变量的*Output*字段位于组件卡的*Advanced*部分，对于具有这些字段的所有组件而言都是如此。
. 名称`myVar`已被指定为目标变量的名称。没有默认名称。目标变量默认存储有效载荷。只有当您要存储除完整有效负载以外的内容时，才需要指定目标值。

要在流程的另一个操作中访问`myVar`的内容，可以使用表达式`myVar.payload`。

有关可用于变量表达式的DataWeave函数的列表，请参阅DataWeave函数参考中的"Core"。 "Core"与本主题结尾处的*See also*部分相关联。




== 另请参阅

*  link:/mule4-user-guide/v/4.1/variable-transformer-reference[设置变量]
*  link:/mule4-user-guide/v/4.1/dw-core[核心]
